(window.webpackJsonpjacinto_rl=window.webpackJsonpjacinto_rl||[]).push([[0],{143:function(e,t,a){e.exports=a(327)},148:function(e,t,a){},149:function(e,t,a){},327:function(e,t,a){"use strict";a.r(t);var n=a(6),r=a.n(n),i=a(86),s=a.n(i),c=(a(148),a(149),a(5)),o=a(0),u=a(2),l=a(3),h=a(1),d=a(4),p=a(142),g=a.n(p),f="Title",m="Level",y="Lose",b="Win",v="CharacterSelect",O=a(17),k=a.n(O),j=a(26),E=a(56),x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;if(!(e<=0))return new Promise((function(t){return setTimeout(t,e)}))},A=function(e,t,a){return Math.min(Math.max(e,t),a)},C=function(e){return e[Math.floor(Math.random()*e.length)]},w=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e},T=function(e){return"".concat(e.x,",").concat(e.y)},P=function(e){return function(t,a){var n=e.map[t+","+a];return!!n&&e.tileKey[n.type].passable}},R=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:P,i=(e.map,r(e)),s=new E.b.AStar(t.x,t.y,i,{topology:n}),c=[];return s.compute(a.x,a.y,(function(e,t){c.push({x:e,y:t})})),c.slice(1)},S=function(e,t,a){return{x:_(e.x,t.x,a),y:_(e.y,t.y,a)}},_=function(e,t,a){return e+a*(t-e)},N=function(e,t){for(var a,n=[],r=function(e,t){var a=t.x-e.x,n=t.y-e.y;return Math.max(Math.abs(a),Math.abs(n))}(e,t),i=0;i<r;i++){var s=0===r?0:i/r;n.push((a=S(e,t,s),{x:Math.round(a.x),y:Math.round(a.y)}))}return n},D=function(e,t,a,n,r){return R(e,t,a,n).slice(0,r+1)},I=function(e){var t=Object.keys(e),a=C(t).split(",");return{coordinates:{x:parseInt(a[0]),y:parseInt(a[1])},text:a}},M=function(e){return e.filter((function(e){return e.hasOwnProperty("durability")}))},L=function(e){return 2/3*(Math.pow(e,3)-9*Math.pow(e,2)+32*e-18)},G=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=L(a),r=[],i=0;i<n;i++){var s=Math.round(e+Math.cos(2*Math.PI/n*i)*a),c=Math.round(t+Math.sin(2*Math.PI/n*i)*a);r.push({x:s,y:c})}return r},U=a(15),q=a.n(U),B=a(24),W=a.n(B),H=function e(t){var a=t.game,n=void 0===a?null:a,r=t.passable,i=void 0!==r&&r,s=t.name,c=void 0===s?"nameless":s;Object(o.a)(this,e);var u=W()();this.entityTypes=["Entity"],this.id=u,this.name=c,this.game=n,this.passable=i,this.active=!0},F=a(7),z=a(19),K="#424242",Y="#606b79",X="#B7C3CD",J="#CED5DD",V="#E16264",Q={base03:"#002b36",base02:"#073642",base01:"#586e75",base00:"#657b83",base0:"#839496",base1:"#93a1a1",base2:"#eee8d5",base3:"#fdf6e3",yellow:"#b58900",orange:"#cb4b16",red:"#dc322f",magenta:"#d33682",violet:"#6c71c4",blue:"#268bd2",cyan:"#2aa198",green:"#859900"},Z={GROUND:{background:Q.base03,foreground:Q.base01,character:".",sprite:"\ue8a2",passable:!0},FLOOR:{background:Q.base02,foreground:Q.base0,character:"",passable:!0},SAFE_FLOOR:{background:Q.base02,foreground:Q.base0,character:"",passable:!0},BURNT:{background:Q.base03,foreground:Q.red,character:"X",sprite:"\ue8bb",passable:!0,animation:[{background:Q.base03,foreground:Q.red,character:"X",sprite:"\ue8bb",passable:!0},{background:Q.base03,foreground:Q.red,character:"x",sprite:"\ue8bb",passable:!0},{background:Q.base03,foreground:Q.red,character:"X",sprite:"\ue8bb",passable:!0},{background:Q.base03,foreground:Q.orange,character:"x",sprite:"\ue8bb",passable:!0},{background:Q.base03,foreground:Q.orange,character:"X",sprite:"\ue8bb",passable:!0},{background:Q.base03,foreground:Q.yellow,character:"x",sprite:"\ue8bb",passable:!0},{background:Q.base03,foreground:Q.red,character:"X",sprite:"\ue8bb",passable:!0}]},WET:{background:Q.base03,foreground:Q.blue,character:"=",sprite:"\ue8ca",passable:!0,animation:[{background:Q.base03,foreground:Q.blue,character:"=",sprite:"\ue8ca",passable:!0},{background:Q.base03,foreground:Q.blue,character:"~",sprite:"\ue8ca",passable:!0},{background:Q.base03,foreground:Q.blue,character:"=",sprite:"\ue8ca",passable:!0},{background:Q.base03,foreground:Q.base0,character:"~",sprite:"\ue8ca",passable:!0},{background:Q.base03,foreground:Q.base1,character:"=",sprite:"\ue8ca",passable:!0},{background:Q.base03,foreground:Q.base1,character:"~",sprite:"\ue8ca",passable:!0},{background:Q.base03,foreground:Q.blue,character:"=",sprite:"\ue8ca",passable:!0}]},WALL:{background:Q.base02,foreground:Q.base2,character:"#",sprite:"\ue802",passable:!1},DOOR:{background:Q.base02,foreground:Q.base0,character:"+",sprite:"\ue86d",passable:!0},SAFE:{background:Q.base02,foreground:Q.green,character:"+",sprite:"\ue8b2",passable:!0},WATER:{animation:[{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#8aa",character:"\u2592",passable:!1},{background:"#424242",foreground:"#8aa",character:"\u2593",passable:!1}],background:"#9dc3d3",character:"\u2591",passable:!1}},$={N:[0,-1],NE:[1,-1],W:[-1,0],NW:[-1,-1],SW:[-1,1],S:[0,1],SE:[1,1],E:[1,0],NONE:[0,0]},ee="HEAD",te="TORSO",ae="BACK",ne="HAND",re="FEET",ie=function(){return[{type:ee,name:"head",item:null},{type:te,name:"torso",item:null},{type:ae,name:"back",item:null},{type:ne,name:"left_hand",item:null},{type:ne,name:"right_hand",item:null},{type:re,name:"feet",item:null}]},se=function(){return[{type:ne,name:"weapon",item:null}]},ce={point:{x_offset:0,y_offset:0,positions:[{x:0,y:0,taken:!1}]},verticalLine:{x_offset:1,y_offset:1,positions:[{x:0,y:0,taken:!1},{x:0,y:1,taken:!1},{x:0,y:-1,taken:!1}]},smallSquare:{x_offset:0,y_offset:0,positions:[{x:0,y:0,taken:!1},{x:0,y:1,taken:!1},{x:1,y:1,taken:!1},{x:1,y:0,taken:!1}]},square:{x_offset:2,y_offset:2,positions:[{x:0,y:0,taken:!1},{x:0,y:1,taken:!1},{x:1,y:1,taken:!1},{x:1,y:0,taken:!1},{x:1,y:-1,taken:!1},{x:0,y:-1,taken:!1},{x:-1,y:-1,taken:!1},{x:-1,y:0,taken:!1},{x:-1,y:1,taken:!1}]},bigSquare:{x_offset:2,y_offset:2,positions:[{x:0,y:0,taken:!1},{x:0,y:1,taken:!1},{x:1,y:1,taken:!1},{x:1,y:0,taken:!1},{x:1,y:-1,taken:!1},{x:0,y:-1,taken:!1},{x:-1,y:-1,taken:!1},{x:-1,y:0,taken:!1},{x:-1,y:1,taken:!1},{x:0,y:1,taken:!1},{x:2,y:2,taken:!1},{x:2,y:0,taken:!1},{x:2,y:-2,taken:!1},{x:0,y:-2,taken:!1},{x:-2,y:-2,taken:!1},{x:-2,y:0,taken:!1},{x:-2,y:2,taken:!1}]},circle:{x_offset:0,y_offset:0,positions:[].concat(Object(z.a)(G(0,0,2)),Object(z.a)(G(0,0,3)))}},oe={default:{renderer:{character:"*",color:"black",background:"white"}},fail:{renderer:{character:"x",color:"black",background:"red"}},succede:{renderer:{character:"x",color:Q.base3,background:Q.green}},damage:{renderer:{character:"*",color:"darkred",background:"red"}},leaf:{renderer:{character:"\u2724",color:"#36635b",background:"#F0D8C0"}},water:{renderer:{character:"~",color:Q.base3,background:Q.blue}}},ue=0,le=1,he=a(11),de=function e(t){var a=t.name,n=void 0===a?"Resource":a,r=t.getResourceCost,i=void 0===r?function(){return null}:r,s=t.actorResourcePath,c=void 0===s?null:s,u=t.actorResourceGetter,l=void 0===u?null:u,h=t.actorResourceSetter,d=void 0===h?null:h,p=t.renderer,g=void 0===p?{background:"transparent",color:"black",character:"*"}:p;Object(o.a)(this,e),this.name=n,this.getResourceCost=i,this.actorResourcePath=c,this.actorResourceGetter=l,this.actorResourceSetter=d,this.renderer=g},pe=function(e){function t(e){var a,n=Object.assign({},e);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},n)))).name="Energy",a.actorResourcePath="energy",a.renderer={color:"black",background:"#ff9926",character:"8",sprite:"\ue8c5"},a}return Object(d.a)(t,e),t}(de),ge=function(){function e(t){var a=this,n=t.game,r=t.actor,i=t.label,s=void 0===i?"action label":i,c=t.hidden,u=void 0!==c&&c,l=t.energyCost,h=void 0===l?100:l,d=t.processDelay,p=void 0===d?50:d,g=t.particles,f=void 0===g?[]:g,m=t.renderer,y=void 0===m?null:m,b=t.particleTemplate,v=void 0===b?oe.default:b,O=t.onBefore,k=void 0===O?function(){return null}:O,j=t.onAfter,E=void 0===j?function(){return null}:j,x=t.onSuccess,A=void 0===x?function(){return null}:x,C=t.onFailure,w=void 0===C?function(){return null}:C,T=t.interrupt,P=void 0!==T&&T,R=t.requiredResources,S=void 0===R?[]:R;Object(o.a)(this,e),this.actor=r,this.game=n,this.label=s,this.hidden=u,this.energyCost=h,this.processDelay=p,this.particles=f,this.renderer=y,this.particleTemplate=v,this.onBefore=k,this.onAfter=E,this.onSuccess=A,this.onFailure=w,this.interrupt=P,this.requiredResources=[new pe({getResourceCost:function(){return a.energyCost}})].concat(Object(z.a)(S))}return Object(u.a)(e,[{key:"addParticle",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Object(c.a)({},this.particleTemplate.renderer),r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ue,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=new ft({game:this.game,name:"particle",passable:!0,life:e,pos:t,direction:a,energy:100,renderer:n,type:r,path:i});this.particles.push(s)}},{key:"removeDeadParticles",value:function(){this.particles=this.particles.filter((function(e){return e.life>0}))}},{key:"setAsNextAction",value:function(){this.actor.setNextAction(this)}},{key:"getEnergyCost",value:function(){return he.find(this.requiredResources,{name:"Energy"}).getResourceCost()}},{key:"getRequiredResourceName",value:function(){return he.map(this.requiredResources,"name")}},{key:"listPayableResources",value:function(){var e=this;return he.map(this.requiredResources,(function(t){var a=t.getResourceCost,n=t.actorResourcePath,r=t.actorResourceGetter,i=he.get(e.actor,n,null),s=!1;return null!==he.get(e.actor,r,null)?s=e.actor[r]()>=a():null!==i&&(s=i>=a()),Object(c.a)({canPay:s},t)}))}},{key:"canPayRequiredResources",value:function(){return!he.find(this.listPayableResources(),{canPay:!1})}},{key:"payRequiredResources",value:function(){var e=this;he.each(this.requiredResources,(function(t){var a=t.getResourceCost,n=t.actorResourcePath,r=t.actorResourceSetter,i=he.get(e.actor,n,null),s=a();return he.get(e.actor,r,null)?(e.actor[r](i-s),!0):!!i&&(e.actor[n]-=s,!0)}))}},{key:"perform",value:function(){return{success:!0,alternative:null}}}]),e}(),fe=function(e){function t(e){var a,n=e.processDelay,r=void 0===n?0:n,i=Object(F.a)(e,["processDelay"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},i)))).processDelay=r,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"perform",value:function(){return this.actor.energy-=this.energyCost,this.actor.destroy(),{success:!0,alternative:null}}}]),t}(ge),me=function(e){function t(e){var a,n=e.engine,r=Object(F.a)(e,["engine"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},r)))).engine=n,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"perform",value:function(){var e=Object(j.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!0,a=null,console.log("".concat(this.actor.name," is cranking its engine.")),e.prev=3,e.next=6,this.engine.start();case 6:this.actor.energy-=this.energyCost,e.next=14;break;case 9:e.prev=9,e.t0=e.catch(3),console.log("EngineCrank"),console.log(e.t0),a=new fe({game:this.game,actor:this.actor,energyCost:100});case 14:return e.abrupt("return",{success:t,alternative:a});case 15:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(){return e.apply(this,arguments)}}()}]),t}(ge),ye=function(e){return function(e){function t(e){var a,n=e.children,r=void 0===n?[]:n,i=e.engine,s=void 0===i?new yt({}):i,u=Object(F.a)(e,["children","engine"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},u)))).entityTypes=a.entityTypes.concat("PARENT"),a.children=r,a.engine=s,a.isInitialized=!1,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"destroyChild",value:function(e){e.energy=0;var t=this.game.map[T(e.pos)];this.game.map[T(e.pos)].entities=t.entities.filter((function(t){return t.id!==e.id})),this.engine.actors=this.engine.actors.filter((function(t){return t.id!==e.id})),this.game.draw()}},{key:"canAttack",value:function(e){return!this.children.map((function(e){return e.id})).includes(e.id)}},{key:"initialize",value:function(){var e=this;this.isInitialized=!0,this.engine.game=this.game,this.engine.actors=this.children,this.engine.actors.forEach((function(t){t.game=e.game,t.destroy=function(){e.destroyChild(t)},t.canAttack=e.canAttack.bind(e),e.game.placeActorOnMap(t),e.engine.addActor(t),e.game.draw()}))}},{key:"getAction",value:function(e){return this.isInitialized||this.initialize(),new me({game:e,actor:this,engine:this.engine,energyCost:100,processDelay:10})}}]),t}(e)},be=a(9),ve=a(29),Oe=a.n(ve),ke=0,je=1,Ee=2,xe=function(){function e(t){var a=t.display;Object(o.a)(this,e);var n=W()();this.id=n,this.lifeTime=0,this.active=!0,this.display=a,this.node=null}return Object(u.a)(e,[{key:"getActive",value:function(){return!1}},{key:"initialize",value:function(){}},{key:"update",value:function(e){this.lifeTime+=e.timeDiff,this.active=this.getActive(),this.active||this.display.removeAnimation(this.id)}}]),e}(),Ae=function(e){function t(e){var a=Object.assign({},e);return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},a)))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"getActive",value:function(){return!(this.lifeTime>500)}}]),t}(xe),Ce=function(e){function t(e){var a,n=e.x,r=e.y,i=e.lerpDirection,s=void 0===i?-1:i,u=e.color,d=void 0===u?"#fff":u,p=Object(F.a)(e,["x","y","lerpDirection","color"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},p)))).x=n,a.y=r,a.lerpDirection=s,a.color=d,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"getActive",value:function(){return this.active}},{key:"initialize",value:function(){this.active=!0;var e=new Oe.a.Rect({name:"rect",x:this.display.tileWidth*this.x+(this.display.tileOffset+this.display.tileGutter),y:this.display.tileHeight*this.y+(this.display.tileOffset+this.display.tileGutter),offsetX:this.display.tileWidth/-4,offsetY:this.display.tileHeight/-4,width:this.display.tileWidth/2,height:this.display.tileHeight/2,fill:this.color,strokeEnabled:!1,transformsEnabled:"position",perfectDrawEnabled:!1,listening:!1,shadowForStrokeEnabled:!1});this.display.animationLayer.add(e),this.node=e,Object(be.a)(Object(h.a)(t.prototype),"initialize",this).call(this)}},{key:"update",value:function(e){var a=this.node.opacity();a>=1&&(this.lerpDirection=-1),a<=0&&(this.lerpDirection=1),a+=.05*this.lerpDirection,this.node.opacity(A(a,0,1)),Object(be.a)(Object(h.a)(t.prototype),"update",this).call(this,e)}}]),t}(xe),we=function(){function e(t){var a=t.containerId,n=void 0===a?null:a,r=t.width,i=void 0===r?100:r,s=t.height,c=void 0===s?100:s,u=t.tileWidth,l=void 0===u?10:u,h=t.tileHeight,d=void 0===h?10:h,p=t.tileGutter,g=void 0===p?0:p,f=t.tileOffset,m=void 0===f?10:f,y=t.game,b=void 0===y?null:y;Object(o.a)(this,e),this.containerId=n,this.width=i,this.height=c,this.tileWidth=l,this.tileHeight=d,this.tileGutter=g,this.tileOffset=m,this.stage=null,this.layer=null,this.animationLayer=null,this.animations=[],this.animationLoop=null,this.game=b}return Object(u.a)(e,[{key:"initialize",value:function(e){var t=this,a=e.getElementById(this.containerId),n=e.createElement("div");a.appendChild(n),this.adjustContentToScreen(a),this.stage=new Oe.a.Stage({container:"display",width:this.width,height:this.height}),this.layer=new Oe.a.Layer({hitGraphEnabled:!1}),this.stage.add(this.layer),this.animationLayer=new Oe.a.Layer({}),this.stage.add(this.animationLayer);var r=new Oe.a.Animation((function(e){t.animations.forEach((function(t){return t.update(e)})),t.animations.length<=0&&t.animationLoop&&t.animationLoop.isRunning()&&t.animationLoop.stop()}),this.animationLayer);this.animationLoop=r,r.start()}},{key:"adjustContentToScreen",value:function(e){var t=(e.offsetWidth-this.tileOffset)/this.game.mapWidth;this.tileWidth=Math.ceil(t),this.tileHeight=this.tileWidth,this.width=(this.game.mapWidth-1)*this.tileWidth+this.tileOffset,this.height=this.game.mapHeight*this.tileHeight+this.tileOffset}},{key:"addAnimation",value:function(e,t){var a;switch(e){case Ee:a=new Ae(Object(c.a)({display:this},t));break;case je:a=new Ce(Object(c.a)({display:this},t));break;case ke:default:a=new xe(Object(c.a)({display:this},t))}return a.initialize(),this.animations.push(a),this.animationLoop.isRunning()||this.animationLoop.start(),a}},{key:"removeAnimation",value:function(e){this.animations=this.animations.filter((function(t){return t.id!==e||(t.node.destroy(),!1)}))}},{key:"updateAnimation",value:function(e){this.animations=this.animations.map((function(t){return t.id===e&&console.log(t),t}))}},{key:"updateTile",value:function(e,t,a,n){e&&(e.children[0].fill(n),e.children[1].fill(a),e.children[1].text(t))}},{key:"createTile",value:function(e,t,a,n,r){arguments.length>5&&void 0!==arguments[5]&&arguments[5];var i=this.tileWidth*e+(this.tileOffset+this.tileGutter),s=this.tileHeight*t+(this.tileOffset+this.tileGutter),c=new Oe.a.Group({id:"".concat(e,",").concat(t),x:this.tileWidth*e+(this.tileOffset+this.tileGutter),y:this.tileHeight*t+(this.tileOffset+this.tileGutter),width:this.tileWidth,height:this.tileHeight,transformsEnabled:"position",perfectDrawEnabled:!1,listening:!1,shadowForStrokeEnabled:!1}),o=new Oe.a.Rect({name:"rect",width:this.tileWidth,height:this.tileHeight,fill:r,strokeEnabled:!1,transformsEnabled:"position",perfectDrawEnabled:!1,listening:!1,shadowForStrokeEnabled:!1}),u=new Oe.a.Text({name:"text",text:a,width:this.tileWidth,height:this.tileHeight,fontSize:this.tileWidth-4,fontFamily:"scroll-o-script",fill:n,align:"center",verticalAlign:"middle",transformsEnabled:"position",perfectDrawEnabled:!1,listening:!1,shadowForStrokeEnabled:!1}),l=this.layer;return 1===e&&1===t&&Oe.a.Image.fromURL("/tile241.png",(function(e){e.setAttrs({x:i,y:s,scaleX:1,scaleY:1,fill:"pink",opacity:.5}),l.add(e)})),c.add(o),c.add(u),this.layer.add(c),c}},{key:"getAbsoultueX",value:function(e){return this.tileWidth*e+(this.tileOffset+this.tileGutter)}},{key:"getAbsoultueY",value:function(e){return this.tileWidth*e+(this.tileOffset+this.tileGutter)}},{key:"getTilesWide",value:function(e,t,a){return Math.floor((e-t)/a)}},{key:"getTilesHigh",value:function(e,t,a){return Math.floor((e-t)/a)}},{key:"getTilesAcrossOnScreen",value:function(){return Math.floor(this.width/this.tileWidth)}},{key:"getTilesDownOnScreen",value:function(){return Math.floor(this.height/this.tileHeight)}},{key:"draw",value:function(){this.layer.batchDraw()}}]),e}(),Te={INFORMATION:{color:X,backgroundColor:K},ACTION:{color:Y,backgroundColor:J},DANGER:{color:V,backgroundColor:K},STATUS_EFFECT:{color:Q.base3,backgroundColor:Q.violet},ERROR:{color:Q.base3,backgroundColor:Q.yellow}},Pe=function e(t){var a=t.text,n=void 0===a?"":a,r=t.type,i=void 0===r?Te.INFORMATION:r;Object(o.a)(this,e);var s=W()();this.id=s,this.text=n,this.type=i},Re=function(e){return function(e){function t(e){var a,n=e.attackDamage,r=void 0===n?1:n,i=Object(F.a)(e,["attackDamage"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},i)))).entityTypes=a.entityTypes.concat("ATTACKING"),a.attackDamage=r,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"getAttackDamage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.attackDamage+e}},{key:"canAttack",value:function(e){return!0}},{key:"attack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=!1,n=this.game.map[T(e)];if(!n)return a;var r=M(n.entities);if(r.length>0){var i=r[0];if(this.canAttack(i)){var s=this.getAttackDamage(t);this.entityTypes.includes("EQUIPING")&&this.equipment.forEach((function(e){e.item&&e.item.entityTypes.includes("ATTACKING")&&(s+=e.item.getAttackDamage())})),this.game.addMessage("".concat(this.name," does ").concat(s," to ").concat(i.name),Te.DANGER),i.decreaseDurability(s),a=!0}}return a}}]),t}(e)},Se=function(e){return function(e){function t(e){var a,n=e.attackRange,r=void 0===n?0:n,i=e.baseRangedAccuracy,s=void 0===i?0:i,u=e.baseRangedDamage,d=void 0===u?0:u,p=e.magazineSize,g=void 0===p?0:p,f=Object(F.a)(e,["attackRange","baseRangedAccuracy","baseRangedDamage","magazineSize"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},f)))).entityTypes=a.entityTypes.concat("RANGED_ATTACKING"),a.attackRange=r,a.baseRangedAccuracy=s,a.baseRangedDamage=d,a.magazineSize=g,a.magazine=0,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"getRangedAttackChance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.getRangedWeaponAccuracy(),a=e?this.getRangedAttackCoverDebuff(e):0,n=e?this.getRangedAttackDistanceDebuff(e):0,r=this.baseRangedAccuracy+t+a+n;return r}},{key:"getRangedAttackCoverDebuff",value:function(e){var t=this;return N(this.getPosition(),e).reduce((function(e,a){var n,r,i=t.game.map[T(a)],s=(n=i.entities,r="COVERING",n.filter((function(e){return e.entityTypes.includes(r)}))),c=0;return s.length>0&&(c=s[0].accuracyModifer),e+c}),0)}},{key:"getRangedAttackDistanceDebuff",value:function(e){return R(this.game,e,this.getPosition(),8).length/(3*this.getAttackRange())*-1}},{key:"getAttackRange",value:function(){var e=this.attackRange;return this.entityTypes.includes("EQUIPING")&&this.equipment.forEach((function(t){t.item&&t.item.entityTypes.includes("RANGED_ATTACKING")&&(e+=t.item.attackRange)})),e}},{key:"getRangedWeaponAccuracy",value:function(){var e=0;return this.entityTypes.includes("EQUIPING")&&this.equipment.forEach((function(t){t.item&&t.item.entityTypes.includes("RANGED_ATTACKING")&&(e+=t.item.getRangedAttackChance())})),e}},{key:"getRangedAttackDamage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.baseRangedDamage+this.getRangedWeaponDamage()+e}},{key:"getRangedWeaponDamage",value:function(){var e=0;return this.entityTypes.includes("EQUIPING")&&this.equipment.forEach((function(t){t.item&&t.item.entityTypes.includes("RANGED_ATTACKING")&&(e+=t.item.getRangedAttackDamage())})),e}},{key:"canRangedAttack",value:function(e){return!0}},{key:"getEquipedWeapons",value:function(){return this.entityTypes.includes("EQUIPING")?this.equipment.map((function(e){if(e.item&&e.item.entityTypes.includes("RANGED_ATTACKING"))return e.item})):[]}},{key:"useAmmo",value:function(){this.getEquipedWeapons().forEach((function(e){return e.magazine=Math.max(0,e.magazine-1)}))}},{key:"reload",value:function(){var e=this,t=!1;return this.entityTypes.includes("CONTAINING")&&this.getEquipedWeapons().forEach((function(a){for(var n=a.magazineSize-a.magazine,r=0;r<=n;r++){var i=e.contains("Ammo");i&&(e.removeFromContainer(i),a.magazine+=1,t=!0)}})),t}},{key:"rangedAttack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=!1,r=!1,i=this.game.map[T(e)];if(!i)return[n,r];var s=M(i.entities);if(s.length>0){var c=this.getRangedAttackChance(e),o=c+a;if(!(r=Math.random()<o))return[n=!0,r];this.useAmmo();var u=s[0];if(this.canRangedAttack(u)){var l=this.getRangedAttackDamage(t);this.game.addMessage("".concat(this.name," does ").concat(l," to ").concat(u.name),Te.DANGER),u.decreaseDurability(l),n=!0}}return[n,r]}}]),t}(e)},_e=function(e){return function(e){function t(e){var a,n=e.name,r=void 0===n?"nameless":n,i=e.equipmentType,s=void 0===i?ne:i,u=Object(F.a)(e,["name","equipmentType"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},u)))).entityTypes=a.entityTypes.concat("EQUIPABLE"),a.name=r,a.equipmentType=s,a}return Object(d.a)(t,e),t}(e)},Ne=function(e){return function(e){function t(e){var a,n=e.actions,r=void 0===n?[]:n,i=e.speed,s=void 0===i?100:i,u=(e.energy,Object(F.a)(e,["actions","speed","energy"]));return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},u)))).entityTypes=a.entityTypes.concat("ACTING"),a.actions=r,a.speed=s,a.energy=s,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"getAction",value:function(){var e=C(this.actions);if(e)return e}},{key:"gainEnergy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.speed;this.energy+=e}},{key:"hasEnoughEnergy",value:function(){return this.energy>0}}]),t}(e)},De=function(e){return function(e){function t(e){var a,n=e.pos,r=void 0===n?{x:0,y:0}:n,i=e.renderer,s=Object(F.a)(e,["pos","renderer"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},s)))).entityTypes=a.entityTypes.concat("RENDERING"),a.pos=r,a.renderer=Object(c.a)({},i),a.currentFrame=0,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"getRenderer",value:function(){return this.renderer}},{key:"getPosition",value:function(){return this.pos}},{key:"move",value:function(e){var t=this,a=!1;if(this.game.canOccupyPosition(e,this)){var n=this.game.map[T(this.pos)];this.game.map[T(this.pos)]=Object(c.a)({},n,{entities:n.entities.filter((function(e){return e.id!==t.id}))}),this.pos=e,this.game.map[T(e)].entities.push(this),a=!0}return a}},{key:"shove",value:function(e,t){var a=this.game.map[T(e)];return a&&a.entities.map((function(e){if(e.entityTypes.includes("PUSHABLE")&&!e.passable&&e.pushable){var a={x:e.pos.x+t[0],y:e.pos.y+t[1]};e.move(a)}})),this.move(e)}}]),t}(e)},Ie=function e(t){var a=t.itemType,n=t.items;Object(o.a)(this,e),this.itemType=a,this.items=n},Me=function(e){return function(e){function t(e){var a,n=e.container,r=void 0===n?[]:n,i=Object(F.a)(e,["container"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},i)))).entityTypes=a.entityTypes.concat("CONTAINING"),a.container=r,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"createSlot",value:function(e){var t=new Ie({itemType:e.name,items:[e]});this.container.push(t)}},{key:"contains",value:function(e){var t=this.container.filter((function(t){return t.itemType===e}));return t.length>0&&t[0].items[0]}},{key:"addToContainer",value:function(e){var t=this.container.findIndex((function(t){return t.itemType===e.name}));t>=0?this.container[t].items.push(e):this.createSlot(e)}},{key:"removeFromContainer",value:function(e){var t=this;this.container.forEach((function(a,n){a.items=a.items.filter((function(t){return t.id!==e.id})),a.items.length||t.container.splice(n,1)}))}}]),t}(e)},Le=a(20);console.log(window.PUBLIC_URL);var Ge={fire_0:new Le.Howl({src:[window.PUBLIC_URL+"/sounds/fire-00.mp3"],volume:.5,loop:!0}),fire_1:new Le.Howl({src:[window.PUBLIC_URL+"/sounds/fire-01.mp3"],volume:.05,loop:!0}),scream_0:new Le.Howl({src:[window.PUBLIC_URL+"/sounds/scream-00.wav"]}),scream_1:new Le.Howl({src:[window.PUBLIC_URL+"/sounds/scream-01.wav"]}),scream_2:new Le.Howl({src:[window.PUBLIC_URL+"/sounds/scream-02.wav"]}),water_0:new Le.Howl({src:[window.PUBLIC_URL+"/sounds/water-04.wav"]}),water_1:new Le.Howl({src:[window.PUBLIC_URL+"/sounds/water-05.wav"]}),chop_0:new Le.Howl({src:[window.PUBLIC_URL+"/sounds/chop-00.wav"]}),chop_1:new Le.Howl({src:[window.PUBLIC_URL+"/sounds/chop-01.wav"]}),equip_0:new Le.Howl({src:[window.PUBLIC_URL+"/sounds/equip-00.wav"]}),equip_1:new Le.Howl({src:[window.PUBLIC_URL+"/sounds/equip-01.wav"]}),explosion_0:new Le.Howl({src:[window.PUBLIC_URL+"/sounds/explosion-00.wav"],volume:.2}),save:new Le.Howl({src:[window.PUBLIC_URL+"/sounds/save.wav"]}),lose:new Le.Howl({src:[window.PUBLIC_URL+"/sounds/lose-00.wav"]}),grab_0:new Le.Howl({src:[window.PUBLIC_URL+"/sounds/grab-00.wav"]}),release_0:new Le.Howl({src:[window.PUBLIC_URL+"/sounds/grab-01.wav"]})},Ue=function(e){return function(e){function t(e){var a,n=e.keymap,r=void 0===n?{}:n,i=Object(F.a)(e,["keymap"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},i)))).entityTypes=a.entityTypes.concat("PLAYING"),a.nextAction=null,a.keymap=r,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"setNextAction",value:function(e){this.nextAction=e}},{key:"getAction",value:function(){var e=this.nextAction;return this.nextAction=null,e}}]),t}(e)},qe=function(e){if(e.energy=0,e.pos){var t=e.game.map[T(e.pos)];e.game.map[T(e.pos)].entities=t.entities.filter((function(t){return t.id!==e.id}))}e.game.engine.removeStatusEffectByActorId(e.id),e.game.draw(),e.active=!1},Be=function(e){function t(e){var a,n=e.message,r=e.messageType,i=void 0===r?Te.INFORMATION:r,s=e.processDelay,u=void 0===s?50:s,d=Object(F.a)(e,["message","messageType","processDelay"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},d)))).message=n,a.messageType=i,a.processDelay=u,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"perform",value:function(){return this.game.addMessage("".concat(this.actor.name,' says "').concat(this.message,'"'),this.messageType),{success:!0,alternative:null}}}]),t}(ge),We=function(e){function t(e){var a,n=e.targetPos,r=e.additionalDamage,i=void 0===r?0:r,s=e.processDelay,u=void 0===s?100:s,d=Object(F.a)(e,["targetPos","additionalDamage","processDelay"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},d)))).targetPos=n,a.additionalDamage=i,a.processDelay=u,a.particleTemplate=oe.damage,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"perform",value:function(){var e;if(!this.actor.entityTypes.includes("ATTACKING"))return{success:!0,alternative:new Be({message:"Ooh I don't know how to attack",game:this.game,actor:this.actor,energyCost:0})};(e=this.actor.attack(this.targetPos,this.additionalDamage))&&(C([Ge.chop_0,Ge.chop_1]).play(),this.addParticle(1,Object(c.a)({},this.targetPos),{x:0,y:0}));return{success:e,alternative:null}}}]),t}(ge),He=function(e){function t(e){var a,n=e.targetPos,r=e.processDelay,i=void 0===r?25:r,s=Object(F.a)(e,["targetPos","processDelay"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},s)))).targetPos=n,a.processDelay=i,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"perform",value:function(){var e=!1,t=null;return this.actor.move(this.targetPos)?e=!0:(e=!0,t=new We({targetPos:this.targetPos,game:this.game,actor:this.actor,energyCost:0})),{success:e,alternative:t}}}]),t}(ge),Fe=function(e){function t(e){var a=Object.assign({},e);return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},a)))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"perform",value:function(){var e=!1,a=null;this.actor.passable=!1;var n=Object(be.a)(Object(h.a)(t.prototype),"perform",this).call(this);(n.success&&(this.actor.path.shift(),e=!0),0===this.actor.path.length&&(e=!0,a=new fe({game:this.game,actor:this.actor,energyCost:100,processDelay:0})),n.alternative)&&(this.actor.attack(this.targetPos)&&(a=new fe({game:this.game,actor:this.actor,energyCost:100,processDelay:0})));return{success:e,alternative:a}}}]),t}(He),ze=function(e){function t(e){var a,n=e.damageToSelf,r=Object(F.a)(e,["damageToSelf"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},r)))).damageToSelf=n,a.onSuccess=function(){console.log("Self destruct success"),a.actor.decreaseDurabilityWithoutDefense(n)},a.onFailure=function(){console.log("Self destruct fails"),a.actor.destroy()},a}return Object(d.a)(t,e),t}(We),Ke=function(e){function t(e){var a,n=e.targetPos,r=e.damageToSelf,i=void 0===r?1:r,s=e.processDelay,u=void 0===s?25:s,d=Object(F.a)(e,["targetPos","damageToSelf","processDelay"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},d)))).targetPos=n,a.processDelay=u,a.damageToSelf=i,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"perform",value:function(){var e=!1,t=null;return this.actor.move(this.targetPos)?(this.actor.energy-=this.energyCost,e=!0):(e=!0,t=new ze({targetPos:this.targetPos,game:this.game,actor:this.actor,energyCost:100,damageToSelf:this.damageToSelf})),{success:e,alternative:t}}}]),t}(ge),Ye=function(e){function t(e){var a,n=e.targetPos,r=e.direction,i=Object(F.a)(e,["targetPos","direction"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},i)))).targetPos=n,a.direction=r,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"perform",value:function(){var e=!1,t=null;return this.actor.shove(this.targetPos,this.direction)?(this.actor.energy-=this.energyCost,e=!0):(e=!0,t=new We({targetPos:this.targetPos,game:this.game,actor:this.actor,energyCost:100})),{success:e,alternative:t}}}]),t}(ge),Xe=function(e){function t(e){var a,n=Object.assign({},e);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},n)))).processDelay=0,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"perform",value:function(){var e=!1,a=null;this.actor.passable=!1;var n=Object(be.a)(Object(h.a)(t.prototype),"perform",this).call(this);return n.success&&(this.actor.path.shift(),e=!0),0===this.actor.path.length&&(e=!0,a=new fe({game:this.game,actor:this.actor,energyCost:100,processDelay:0})),n.alternative&&this.actor.attack(this.targetPos),{success:e,alternative:a}}}]),t}(He),Je=function(e){return function(e){function t(e){var a,n=e.targetEntity,r=void 0===n?null:n,i=Object(F.a)(e,["targetEntity"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},i)))).entityTypes=a.entityTypes.concat("CHASING"),a.targetEntity=r,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"getAction",value:function(e){if(this.targetEntity){var t=R(e,this.targetEntity.pos,this.pos),a=t.length>0?t[0]:this.pos;return new He({targetPos:a,game:e,actor:this,energyCost:100})}return new Be({message:"Where are they?",game:e,actor:this,energyCost:100})}}]),t}(e)},Ve=function(e){function t(e){var a,n=e.targetPos,r=e.entity,i=e.interrupt,s=void 0===i||i,u=e.forcePlacement,d=void 0!==u&&u,p=Object(F.a)(e,["targetPos","entity","interrupt","forcePlacement"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},p)))).targetPos=n,a.entity=r,a.interrupt=s,a.forcePlacement=d,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"perform",value:function(){var e=!1,t=!!this.forcePlacement||this.game.canOccupyPosition(this.targetPos,this.entity),a=this.game.map[T(this.targetPos)];return t&&a&&(this.entity.pos=this.targetPos,a.entities.push(this.entity),this.game.engine.addActorAsNext(this.entity),e=!0),{success:e,alternative:null}}}]),t}(ge),Qe=function(e){return function(e){function t(e){var a,n=e.draggable,r=void 0===n||n,i=Object(F.a)(e,["draggable"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},i)))).draggable=r,a.entityTypes=a.entityTypes.concat("DRAGGABLE"),a}return Object(d.a)(t,e),t}(e)},Ze=function(e){return function(e){function t(e){var a,n=e.pushable,r=void 0===n||n,i=Object(F.a)(e,["pushable"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},i)))).pushable=r,a.entityTypes=a.entityTypes.concat("PUSHABLE"),a}return Object(d.a)(t,e),t}(e)},$e="Directional Kunai",et=function(e,t,a,n){return new dt({game:e.game,direction:a,passable:!0,pos:{x:t.x,y:t.y},renderer:{character:">",color:"white",background:"",animation:[{background:"lightgrey",color:"grey",character:">"},{background:"lightgrey",color:"grey",character:"v"},{background:"lightgrey",color:"grey",character:"<"},{background:"lightgrey",color:"grey",character:"^"},{background:"lightgrey",color:"grey",character:">"}]},name:$e,speed:600,energy:0,range:n})},tt=function(e){return function(e){function t(e){var a,n=e.durability,r=void 0===n?1:n,i=e.defense,s=void 0===i?0:i,u=e.onDestroy,d=void 0===u?function(){return null}:u,p=Object(F.a)(e,["durability","defense","onDestroy"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},p)))).entityTypes=a.entityTypes.concat("DESTRUCTABLE"),a.durability=r,a.defense=s,a.onDestroy=d,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"getDefense",value:function(){var e=this.defense;return this.entityTypes.includes("EQUIPING")&&this.equipment.forEach((function(t){t.item&&t.item.entityTypes.includes("DESTRUCTABLE")&&(e+=t.item.getDefense())})),e}},{key:"decreaseDurabilityWithoutDefense",value:function(e){this.durability-=e,this.durability<=0&&this.destroy()}},{key:"decreaseDurability",value:function(e){var t=this.durability,a=t-(e-this.getDefense());this.durability=Math.min(t,a),this.renderer.sprite=this.durability,this.renderer.character=this.durability,this.game.draw(),this.durability<=0&&this.destroy()}},{key:"increaseDurability",value:function(e){this.durability+=e}},{key:"destroy",value:function(){this.onDestroy(),qe(this)}}]),t}(e)},at=function(e){return function(e){function t(e){var a,n=Object.assign({},e);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},n)))).entityTypes=a.entityTypes.concat("BURNABLE"),a.canBurn=!0,a.willResetCanBurn=!1,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"resetCanBurn",value:function(){this.willResetCanBurn=!1,this.canBurn=!0}},{key:"burn",value:function(){return!!this.canBurn&&(this.decreaseDurability(2),!0)}}]),t}(e)},nt=a(25),rt=function(e){return function(e){function t(e){var a,n=e.initializeKeymap,r=Object(F.a)(e,["initializeKeymap"]);Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},r)))).entityTypes=a.entityTypes.concat("HAS_KEYMAP"),a.keymapStack=[],a.initializeKeymap=n;var i=n(a.game.engine,Object(nt.a)(a));return a.addKeymap(i),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"getKeymap",value:function(){return he.get(this.keymapStack,"0",null)}},{key:"addKeymap",value:function(e){this.keymapStack.unshift(e)}},{key:"removeKeymap",value:function(){this.keymapStack.shift()}},{key:"reinitializeKeymap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.keymapStack=[];var t=this.initializeKeymap(this.game.engine,this);e.forEach((function(e){return delete t[e]})),this.addKeymap(t)}},{key:"setKeymap",value:function(e){return this.addKeymap(e),this.getKeymap}},{key:"goToPreviousKeymap",value:function(){return this.removeKeymap(),this.getKeymap()}}]),t}(e)},it=function(e){var t=e.activate,a=void 0===t?function(e){return null}:t,n=e.canUpgrade,r=void 0===n?function(e){return!0}:n,i=e.cost,s=void 0===i?1:i,c=e.name,o=void 0===c?"upgrade":c,u=e.removeOnActivate;return{activate:a,canUpgrade:r,cost:s,name:o,removeOnActivate:void 0!==u&&u}},st=(q()(Ne,De,Ue,rt,(function(e){return function(e){function t(e){var a,n=e.initiatedBy,r=void 0===n?null:n,i=e.range,s=void 0===i?null:i,u=Object(F.a)(e,["initiatedBy","range"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},u)))).entityTypes=a.entityTypes.concat("UI"),a.initiatedBy=r,a.active=!0,a.range=s,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"hasEnoughEnergy",value:function(){return this.active}}]),t}(e)}))(H),q()(Ne,De)(H),q()(Ne,De,tt,(function(e){return function(e){function t(e){var a,n=e.messages,r=void 0===n?["I have nothing to say."]:n,i=e.messageType,s=Object(F.a)(e,["messages","messageType"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},s)))).entityTypes=a.entityTypes.concat("SPEAKING"),a.messages=r,a.messageType=i,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"getAction",value:function(e){var t=this.messages.shift();return this.messages.push(t),new Be({actor:this,game:e,message:t,messageType:this.messageType,processDelay:0})}}]),t}(e)}),Qe,Ze,at,(function(e){return function(e){function t(e){var a,n=Object.assign({},e);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},n)))).entityTypes=a.entityTypes.concat("HELPLESS"),a.saved=!1,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"save",value:function(){this.saved=!0,Ge.save.play()}},{key:"destroy",value:function(){C([Ge.scream_0,Ge.scream_1,Ge.scream_2]).play(),Object(be.a)(Object(h.a)(t.prototype),"destroy",this).call(this)}}]),t}(e)}))(H),q()(De,tt)(H),q()(De,(function(e){return function(e){function t(e){var a,n=e.accuracyModifer,r=void 0===n?0:n,i=e.damageModifer,s=void 0===i?0:i,u=Object(F.a)(e,["accuracyModifer","damageModifer"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},u)))).entityTypes=a.entityTypes.concat("COVERING"),a.providesCover=!0,a.accuracyModifer=r,a.damageModifer=s,a}return Object(d.a)(t,e),t}(e)}),tt)(H)),ct=(q()(De,Me,Qe,at,tt,(function(e){return function(e){function t(e){var a,n=e.flammability,r=void 0===n?1:n,i=e.explosivity,s=void 0===i?1:i,u=Object(F.a)(e,["flammability","explosivity"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},u)))).entityTypes=a.entityTypes.concat("EXPLODING"),a.flammability=r,a.explosivity=s,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"enflame",value:function(){var e=this;Array(this.flammability).fill("").map((function(t){return new pt({name:"Pyro",pos:Object(c.a)({},e.pos),game:e.game,renderer:{character:"*",color:Q.base3,background:Q.red},timeToSpread:1,spreadCount:1,durability:1,attackDamage:1,speed:100})})).forEach((function(t){e.game.placeActorOnMap(t),e.game.engine.addActor(t)}))}},{key:"explode",value:function(){var e=this,t={x_offset:0,y_offset:0,positions:Array(this.explosivity).fill("").reduce((function(e,t,a){return e.concat.apply(e,Object(z.a)(G(0,0,a+1)))}),[])};t.positions.forEach((function(a){var n={x:e.pos.x+a.x+t.x_offset,y:e.pos.y+a.y+t.y_offset},r=e.game.map[T(n)];r&&(r.type="BURNT")})),this.explosivity>0&&Ge.explosion_0.play()}},{key:"destroy",value:function(){this.enflame(),this.explode(),Object(be.a)(Object(h.a)(t.prototype),"destroy",this).call(this)}}]),t}(e)}),Ze)(H),q()(Ne,De,(function(e){return function(e){function t(e){var a,n=e.path,r=void 0!==n&&n,i=e.direction,s=void 0===i?{x:0,y:0}:i,u=e.range,d=void 0===u?3:u,p=Object(F.a)(e,["path","direction","range"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},p)))).entityTypes=a.entityTypes.concat("DIRECTIONAL_PUSHING"),a.path=r,a.direction=s,a.range=d,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"getAction",value:function(e){var t=this,a={x:this.pos.x+this.direction[0],y:this.pos.y+this.direction[1]};return this.passable=!1,this.range>0?new Ye({targetPos:a,direction:this.direction,game:e,actor:this,energyCost:100,onSuccess:function(){return t.range-=1}}):new fe({game:e,actor:this,energyCost:0})}}]),t}(e)}),tt)(H),q()(Ne,De,Je,tt)(H),q()(Ne,De,Je,tt,Re,Ze)(H)),ot=q()(Ne,De,(function(e){return function(e){function t(e){var a,n=e.targetEntity,r=void 0===n?null:n,i=e.getProjectile,s=void 0===i?function(){return null}:i,u=Object(F.a)(e,["targetEntity","getProjectile"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},u)))).entityTypes=a.entityTypes.concat("RANGED_CHASING"),a.targetEntity=r,a.getProjectile=s,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"targetInPath",value:function(e,t){var a=!1;return e.forEach((function(e){e.x===t.x&&e.y===t.y&&(a=!0)})),a}},{key:"getAction",value:function(e){if(!this.targetEntity)return new Be({message:"Where are they?",game:e,actor:this,energyCost:100});var t={x:Math.sign(this.targetEntity.pos.x-this.pos.x),y:Math.sign(this.targetEntity.pos.y-this.pos.y)},a=this.getProjectile({pos:{x:this.pos.x,y:this.pos.y},targetPos:Object(c.a)({},this.targetEntity.pos),direction:[t.x,t.y],range:10});if(a.createPath(e),this.targetInPath(a.path,this.targetEntity.pos))return e.canOccupyPosition(a.pos,a)?new Ve({targetPos:Object(c.a)({},a.pos),entity:a,game:e,actor:this,energyCost:100}):new Be({message:"I'll get you with this kunai!",game:e,actor:this,energyCost:100});var n=R(e,this.targetEntity.pos,this.pos),r=n.length>0?n[0]:this.pos;return new He({targetPos:r,game:e,actor:this,energyCost:100})}}]),t}(e)}),tt,Re,Ze)(H),ut=q()(Ne,De,(function(e){return function(e){function t(e){var a,n=e.presentingUI,r=void 0!==n&&n,i=Object(F.a)(e,["presentingUI"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},i)))).entityTypes=a.entityTypes.concat("PRESENTING_UI"),a.presentingUI=r,a}return Object(d.a)(t,e),t}(e)}),(function(e){return function(e){function t(e){var a,n=Object.assign({},e);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},n)))).entityTypes=a.entityTypes.concat("HAS_TARGETING_CURSOR"),a.cursorIsActive=!1,a.cursorPositions=[],a.animations=[],a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"setCursorIsActive",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.cursorIsActive=e}},{key:"activateCursor",value:function(e){this.setCursorPositions(e),this.setCursorIsActive(!0),this.resetAnimations()}},{key:"deactivateCursor",value:function(){this.setCursorIsActive(!1),this.removeAnimations()}},{key:"getCursorPositions",value:function(){return this.cursorPositions}},{key:"setCursorPositions",value:function(e){return this.cursorPositions=e,this.getCursorPositions()}},{key:"addAnimations",value:function(){var e=this,t=this.getCursorPositions();t.length&&t.forEach((function(t){var a=e.game.display.addAnimation(je,{x:t.x,y:t.y,color:Q.red});e.animations.push(a)}))}},{key:"removeAnimations",value:function(){var e=this;this.animations.length&&this.animations.forEach((function(t){return e.game.display.removeAnimation(t.id)})),this.animations=[]}},{key:"resetAnimations",value:function(){this.removeAnimations(),this.addAnimations()}},{key:"moveCursorInDirection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=this.getCursorPositions().map((function(a){return{x:a.x+e[0]*t,y:a.y+e[1]*t}}));return this.setCursorPositions(a),this.resetAnimations(),a}},{key:"changeCursorColor",value:function(e,t){this.animations[e].node.fill(t)}}]),t}(e)}),rt,(function(e){return function(e){function t(e){var a,n=e.draggedEntity,r=void 0===n?null:n,i=Object(F.a)(e,["draggedEntity"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},i)))).entityTypes=a.entityTypes.concat("DRAGGING"),a.draggedEntity=r,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"grab",value:function(e){var t=this.game.map[T(e)];if(!t)return!1;if(t.entities.length>0){var a=t.entities[0];if(a.entityTypes.includes("DRAGGABLE")&&!this.draggedEntity&&!0===a.draggable)return this.draggedEntity=a,!0}return!1}},{key:"release",value:function(){if(!this.draggedEntity)return!1;var e=Object(c.a)({},this.draggedEntity);return this.draggedEntity=null,e}},{key:"drag",value:function(e){var t=this,a=this.draggedEntity.pos,n=this.game.map[T(a)];this.game.map[T(a)]=Object(c.a)({},n,{entities:n.entities.filter((function(e){return e.id!==t.draggedEntity.id}))}),this.draggedEntity.pos=e,this.game.map[T(e)].entities.push(this.draggedEntity)}},{key:"move",value:function(e){var a=Object(c.a)({},this.pos);if(this.draggedEntity){var n=Object(be.a)(Object(h.a)(t.prototype),"move",this).call(this,e);return n?(this.drag(a),!0):n}return Object(be.a)(Object(h.a)(t.prototype),"move",this).call(this,e)}}]),t}(e)}),(function(e){return function(e){function t(e){var a,n=e.charge,r=void 0===n?2:n,i=Object(F.a)(e,["charge"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},i)))).entityTypes=a.entityTypes.concat("CHARGING"),a.charge=r,a.chargeMax=r,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"decreaseCharge",value:function(e){this.charge=Math.max(0,this.charge-e)}},{key:"increaseCharge",value:function(e){this.charge=Math.min(this.chargeMax,this.charge+e)}}]),t}(e)}),(function(e){return function(e){function t(e){var a,n=Object.assign({},e);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},n)))).entityTypes=a.entityTypes.concat("SIGNING"),a.signHistory=[],a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"addSign",value:function(e){this.signHistory.length>=4&&this.signHistory.shift(),this.signHistory.push(e)}},{key:"clearSigns",value:function(){this.signHistory=[]}}]),t}(e)}),Me,(function(e){return function(e){function t(e){var a,n=e.equipment,r=void 0===n?ie():n,i=Object(F.a)(e,["equipment"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},i)))).entityTypes=a.entityTypes.concat("EQUIPING"),a.equipment=r,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"hasItemNameEquipped",value:function(e){return this.equipment.filter((function(t){return!(!t.item||t.item.name!==e)})).length>0}},{key:"getItemInSlot",value:function(e){if(this.equipment.filter((function(t){return null===t.item&&t.type===e})).length>0)return!1;var t=this.equipment.find((function(t){return t.type===e}));return!!t&&(!!t.item&&t.item)}},{key:"equip",value:function(e,t){var a=!1;return this.equipment=this.equipment.map((function(n){return a||n.type!==e||null!==n.item||(n.item=t,a=!0,Ge.equip_1.play()),n})),a}},{key:"unequip",value:function(e){this.equipment=this.equipment.map((function(t){return t.item&&t.item.id===e.id&&(t.item=null,Ge.equip_0.play()),t}))}}]),t}(e)}),Re,Se,tt,(function(e){return function(e){function t(e){var a,n=e.cloneLimit,r=void 0===n?1:n,i=Object(F.a)(e,["cloneLimit"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},i)))).entityTypes=a.entityTypes.concat("CLONING"),a.cloneLimit=r,a.clones=[],a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"destroy",value:function(){this.clones&&this.clones.map((function(e){qe(e)})),qe(this)}},{key:"destroyClone",value:function(e){var t=this.clones.findIndex((function(t){return t.id===e}));t>=0&&(this.clones[t].super__destroy(),this.clones.splice(t,1))}},{key:"createClone",value:function(e){var t=this;if(this.clones.length<this.cloneLimit){var a=Object(he.cloneDeep)(this);if(a.name="Clone",a.game=this.game,a.id=W()(),a.entityTypes.includes("HAS_KEYMAP")){var n=Object(he.find)(e,{attribute:"ignoredKeys"});a.reinitializeKeymap(n?n.value:[])}if(delete a.clones,a.super__destroy=a.destroy,a.destroy=function(){t.destroyClone(a.id)},e.forEach((function(e){a[e.attribute]=e.value})),this.game.placeActorOnMap(a))return this.game.engine.addActorAsNext(a),this.game.draw(),this.clones.push(a),!0}return!1}}]),t}(e)}),Ue,at,(function(e){return function(e){function t(e){var a,n=e.upgrade_points,r=void 0===n?0:n,i=e.upgrade_tree,s=void 0===i?[]:i,u=Object(F.a)(e,["upgrade_points","upgrade_tree"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},u)))).entityTypes=a.entityTypes.concat("UPGRADABLE"),a.upgrade_points=r,a.upgrade_tree=s,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"upgrade",value:function(e){if(e.canUpgrade(this)){if(e.activate(this),e.removeOnActivate){var t=this.upgrade_tree.filter((function(t){return t.name!==e.name}));this.upgrade_tree=t}return!0}return!1}}]),t}(e)}))(H),lt=(q()(De,_e,Re)(H),q()(De,_e,Se,(function(e){return function(e){function t(e){var a,n=e.shapePattern,r=void 0===n?ce.point:n,i=Object(F.a)(e,["shapePattern"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},i)))).shapePattern=r,a.entityTypes=a.entityTypes.concat("HAS_SHAPE_PATTERN"),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"getPositionsInShape",value:function(e){return t=this.shapePattern,a=e,t.positions.map((function(e){return{x:a.x+e.x+t.x_offset,y:a.y+e.y+t.y_offset}}));var t,a}}]),t}(e)}))(H)),ht=(q()(De,_e,tt)(H),q()(De)(H)),dt=(q()(Ne,De,Re,(function(e){return function(e){function t(e){var a,n=e.path,r=void 0!==n&&n,i=e.targetPos,s=void 0===i?null:i,u=e.attackDamage,d=void 0===u?1:u,p=e.range,g=void 0===p?3:p,f=Object(F.a)(e,["path","targetPos","attackDamage","range"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},f)))).entityTypes=a.entityTypes.concat("DESTRUCTIVE_PROJECTING"),a.path=r,a.targetPos=s,a.attackDamage=d,a.range=g,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"createPath",value:function(e){var t=D(e,this.targetPos,this.pos,8,this.range);this.path=t}},{key:"getAction",value:function(e){this.path||this.createPath(e);var t=this.path.length>0?this.path[0]:this.pos;return new Fe({targetPos:t,game:e,actor:this,energyCost:100})}}]),t}(e)}),tt)(H),q()(Ne,De,Re,(function(e){return function(e){function t(e){var a,n=e.path,r=void 0!==n&&n,i=e.direction,s=void 0===i?{x:0,y:0}:i,u=e.attackDamage,d=void 0===u?1:u,p=e.range,g=void 0===p?3:p,f=Object(F.a)(e,["path","direction","attackDamage","range"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},f)))).entityTypes=a.entityTypes.concat("DIRECTIONAL_PROJECTING"),a.path=r,a.direction=s,a.attackDamage=d,a.range=g,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"createPath",value:function(e){for(var t=[],a=1;a<this.range+1;a++)t.push({x:this.pos.x+this.direction[0]*a,y:this.pos.y+this.direction[1]*a});this.path=t}},{key:"getAction",value:function(e){var t=this,a={x:this.pos.x+this.direction[0],y:this.pos.y+this.direction[1]};return this.passable=!1,this.range>0?new Ke({targetPos:a,game:e,actor:this,energyCost:100,damageToSelf:1,onSuccess:function(){return t.range-=1},onAfter:function(){t.energy<=100&&e.engine.setActorToPrevious()}}):new fe({game:e,actor:this,energyCost:0})}}]),t}(e)}),tt)(H)),pt=(q()(Ne,De,Re,(function(e){return function(e){function t(e){var a,n=e.owner_id,r=void 0===n?null:n,i=e.path,s=void 0!==i&&i,u=e.targetPos,d=void 0===u?null:u,p=e.attackDamage,g=void 0===p?1:p,f=e.range,m=void 0===f?3:f,y=Object(F.a)(e,["owner_id","path","targetPos","attackDamage","range"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},y)))).entityTypes=a.entityTypes.concat("GASEOUS_DESTRUCTIVE_PROJECTING"),a.path=s,a.targetPos=d,a.attackDamage=g,a.range=m,a.owner_id=r,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"canAttack",value:function(e){var a=Object(be.a)(Object(h.a)(t.prototype),"canAttack",this).call(this);return a&&(a=null===this.owner_id||e.owner_id!==this.owner_id),a}},{key:"createPath",value:function(e){var t=D(e,this.targetPos,this.pos,8,this.range);this.path=t}},{key:"getAction",value:function(e){this.path||this.createPath(e);var t=this.path.length>0?this.path[0]:this.pos;return new Xe({targetPos:t,game:e,actor:this,energyCost:100})}}]),t}(e)}),tt,(function(e){return function(e){function t(e){var a,n=e.isClone,r=void 0!==n&&n,i=e.cloneCount,s=void 0===i?0:i,u=e.clonePattern,d=void 0===u?ce.square:u,p=Object(F.a)(e,["isClone","cloneCount","clonePattern"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},p)))).entityTypes=a.entityTypes.concat("GASEOUS"),a.isClone=r,a.cloneCount=s,a.clonePattern=Object(he.cloneDeep)(d),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"getAction",value:function(e){var a=this.clonePattern.positions.find((function(e){return!e.taken}));if(!this.isClone&&a){a.taken=!0;var n=Object(he.cloneDeepWith)(this,(function(e,t){switch(t){case"id":case"game":case"engine":case"clones":return null;default:return}}));if(n.game=e,n.id=W()(),this.hasOwnProperty("pos")){var r=this.pos;n.pos={x:r.x+a.x,y:r.y+a.y}}n.hasOwnProperty("path")&&(n.path=n.path.map((function(e){return{x:e.x+a.x,y:e.y+a.y}}))),n.isClone=!0,this.cloneCount+=1,e.placeActorOnMap(n),e.engine.addActor(n),e.draw()}return Object(be.a)(Object(h.a)(t.prototype),"getAction",this).call(this,e)}}]),t}(e)}))(H),q()(Ne,tt,ye)(H),q()(Ne,De,tt,Re,(function(e){return function(e){function t(e){var a,n=e.timeToSpread,r=void 0===n?5:n,i=e.spreadCount,s=void 0===i?1:i,u=Object(F.a)(e,["timeToSpread","spreadCount"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},u)))).entityTypes=a.entityTypes.concat("SPREADING"),a.timeToSpreadMax=r,a.timeToSpread=r,a.spreadCountMax=s,a.spreadCount=s,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"getAction",value:function(e){var t=this;if(this.spreadCount<=0)return new fe({game:e,actor:this,energyCost:100,processDelay:0,onAfter:function(){e.map[T(t.pos)].type="BURNT"}});if(this.timeToSpread<=0){for(var a=[{x:this.pos.x+0,y:this.pos.y+0},{x:this.pos.x+1,y:this.pos.y+0},{x:this.pos.x+-1,y:this.pos.y+0},{x:this.pos.x+0,y:this.pos.y+1},{x:this.pos.x+0,y:this.pos.y+-1}],n=null,r=100;r>0;){var i=C(a),s=this.game.map[T(i)],c=Boolean(s),o=!0,u=!1;if(s&&(o="BURNT"!==s.type,u=["WALL","FLOOR","DOOR"].includes(s.type)),c&&o&&u){n=i;break}r-=1}if(n){var l=new pt({name:"Pyro",pos:{x:0,y:0},game:e,renderer:{character:"*",sprite:"\ue8bb",color:Q.base3,background:Q.red},timeToSpread:this.timeToSpreadMax,spreadCount:this.spreadCountMax,durability:this.durability,attackDamage:this.attackDamage,speed:this.speed});return this.timeToSpread=this.timeToSpreadMax,this.spreadCount-=1,new Ve({targetPos:n,entity:l,game:e,actor:this,interrupt:!1,energyCost:100,processDelay:0,forcePlacement:!0})}this.timeToSpread=this.timeToSpreadMax,this.spreadCount-=1}return this.timeToSpread-=1,new Be({message:"burning",game:e,actor:this,processDelay:0})}}]),t}(e)}))(H)),gt=q()(Ne,De,tt,(function(e){return function(e){function t(e){var a,n=e.getSpawnedEntity,r=e.timeToSpread,i=void 0===r?5:r,s=e.spreadCount,u=void 0===s?1:s,d=Object(F.a)(e,["getSpawnedEntity","timeToSpread","spreadCount"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},d)))).entityTypes=a.entityTypes.concat("SPAWNING"),a.timeToSpreadMax=i,a.timeToSpread=i,a.spreadCountMax=u,a.spreadCount=u,a.getSpawnedEntity=n,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"getAction",value:function(e){if(this.spreadCount<=0)return new fe({game:e,actor:this,energyCost:100,processDelay:0});if(this.timeToSpread<=0){for(var t=[{x:this.pos.x+1,y:this.pos.y+0},{x:this.pos.x+-1,y:this.pos.y+0},{x:this.pos.x+0,y:this.pos.y+1},{x:this.pos.x+0,y:this.pos.y+-1}],a=null,n=100;n>0;){var r=C(t),i=this.game.map[T(r)];if(Boolean(i)&&e.canOccupyPosition(r)){a=r;break}n-=1}if(a)return this.timeToSpread=this.timeToSpreadMax,this.spreadCount-=1,new Ve({targetPos:a,entity:this.getSpawnedEntity(a),game:e,actor:this,interrupt:!1,energyCost:100,processDelay:0,forcePlacement:!0});this.timeToSpread=this.timeToSpreadMax,this.spreadCount-=1}return this.timeToSpread-=1,new Be({message:"boom boom",game:e,actor:this,processDelay:0})}}]),t}(e)}))(H),ft=q()(Ne,De,(function(e){return function(e){function t(e){var a,n=e.pos,r=void 0===n?{x:1,y:1}:n,i=e.direction,s=void 0===i?{x:0,y:0}:i,u=e.life,d=void 0===u?1:u,p=e.speed,g=void 0===p?1:p,f=e.type,m=void 0===f?ue:f,y=e.path,b=void 0===y?null:y,v=Object(F.a)(e,["pos","direction","life","speed","type","path"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},v)))).pos=r,a.direction=s,a.life=d,a.speed=g,a.type=m,a.path=b,a.entityTypes=a.entityTypes.concat("PARTICLE"),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"getNextPos",value:function(e){switch(this.type){case ue:return{x:this.pos.x+this.direction.x*this.speed*e,y:this.pos.y+this.direction.y*this.speed*e};case le:var t=this.path.shift();return t?Object(c.a)({},t):Object(c.a)({},this.pos)}}},{key:"update",value:function(e){this.life-=e,this.life>0&&(this.pos=this.getNextPos(e))}}]),t}(e)}))(H),mt=(q()(Ne,tt,ye)(H),function(){function e(t){var a=t.statusEffects,n=void 0===a?[]:a,r=t.actors,i=void 0===r?[]:r,s=t.currentActor,c=void 0===s?0:s,u=t.isRunning,l=void 0!==u&&u,h=t.game,d=void 0===h?null:h;Object(o.a)(this,e),this.statusEffects=n,this.actors=i,this.currentActor=c,this.isRunning=l,this.game=d}return Object(u.a)(e,[{key:"processV1",value:function(){var e=Object(j.a)(k.a.mark((function e(){var t,a,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=this.actors[this.currentActor]).gainEnergy(t.speed),!t.hasEnoughEnergy()){e.next=18;break}if(a=t.getAction(this.game)){e.next=6;break}return e.abrupt("return",!1);case 6:return n=a.perform(),this.game.draw(),e.next=11,x(a.processDelay);case 11:if(n.success){e.next=13;break}return e.abrupt("return",!1);case 13:if(null!==n.alternative){e.next=15;break}return e.abrupt("break",18);case 15:a=n.alternative,e.next=6;break;case 18:return this.currentActor=(this.currentActor+1)%this.actors.length,e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"processV2",value:function(){var e=Object(j.a)(k.a.mark((function e(){var t,a,n,r,i;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.actors[this.currentActor],a=!0;case 2:if(!a){e.next=50;break}if(t){e.next=5;break}return e.abrupt("return",!1);case 5:if(t.active){e.next=7;break}return e.abrupt("break",50);case 7:if(n=0,!t.hasEnoughEnergy()){e.next=46;break}if(r=t.getAction(this.game)){e.next=12;break}return e.abrupt("return",!1);case 12:n+=r.getEnergyCost();case 13:if(i={success:!1,alternative:null},!r.canPayRequiredResources()){e.next=22;break}return r.onBefore(),e.next=19,r.perform();case 19:(i=e.sent).success?(r.onSuccess(),r.payRequiredResources()):r.onFailure(),r.onAfter();case 22:return e.next=24,this.processActionFX(r,i.success);case 24:if(e.sent){e.next=33;break}if(!this.shouldAutoRun()){e.next=30;break}return e.next=28,x(25);case 28:e.next=32;break;case 30:return e.next=32,x(r.processDelay);case 32:this.game.draw();case 33:if(t.active){e.next=35;break}return e.abrupt("break",40);case 35:if(null!==i.alternative){e.next=37;break}return e.abrupt("break",40);case 37:r=i.alternative,e.next=13;break;case 40:if(this.processStatusEffects(n),!r.interrupt){e.next=44;break}return a=!1,e.abrupt("break",50);case 44:e.next=48;break;case 46:t.gainEnergy(t.speed),a=!1;case 48:e.next=2;break;case 50:return this.actors=this.actors.filter((function(e){return e.active})),this.currentActor+=1,this.currentActor>=this.actors.length&&(this.currentActor=0),e.abrupt("return",!0);case 54:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"processV3",value:function(){var e=Object(j.a)(k.a.mark((function e(){var t,a,n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.actors[this.currentActor]){e.next=3;break}return e.abrupt("return",!1);case 3:if(a=0,!t.hasEnoughEnergy()){e.next=29;break}if(n=t.getAction(this.game)){e.next=8;break}return e.abrupt("return",!1);case 8:a+=n.energyCost;case 9:return e.next=12,n.perform();case 12:return r=e.sent,e.next=15,this.processActionFX(n,r.success);case 15:if(e.sent){e.next=19;break}return e.next=18,x(n.processDelay);case 18:this.game.draw();case 19:if(r.success){e.next=21;break}return e.abrupt("return",!1);case 21:if(null!==r.alternative){e.next=23;break}return e.abrupt("break",26);case 23:n=r.alternative,e.next=9;break;case 26:this.processStatusEffects(a),e.next=30;break;case 29:t.gainEnergy(t.speed);case 30:return this.currentActor=(this.currentActor+1)%this.actors.length,0===this.currentActor&&this.sortActorsByEnergy(),e.abrupt("return",!0);case 33:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=Object(j.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.isRunning=!0;case 1:if(!this.isRunning){e.next=7;break}return e.next=4,this.processV2();case 4:this.isRunning=e.sent,e.next=1;break;case 7:if(t=this.actors[this.currentActor]){e.next=10;break}return e.abrupt("return",!1);case 10:return this.setVisibleKeymap(t),this.game.updateMode(),e.next=14,this.game.updateReact(this.game);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){this.isRunning=!1}},{key:"setVisibleKeymap",value:function(e){if(e.entityTypes.includes("HAS_KEYMAP")){var t=e.getKeymap();t&&(this.game.visibleKeymap=t)}}},{key:"sortActorsByEnergy",value:function(){this.actors=this.actors.sort((function(e,t){return t.energy-e.energy}))}},{key:"shouldAutoRun",value:function(){return!this.actors.filter((function(e){return e.entityTypes.includes("PLAYING")})).length}},{key:"addStatusEffect",value:function(e){return!e.allowDuplicates&&this.statusEffects.filter((function(t){return t.actor.id===e.actor.id&&t.name===e.name})).length>0?(console.log("".concat(e.name," cannot be applied twice to ").concat(e.actor.name)),!1):(e.onStart(),this.statusEffects.push(e),!0)}},{key:"removeStatusEffectById",value:function(e){this.statusEffects=this.statusEffects.filter((function(t){return t.id!==e||(t.onStop(),!1)}))}},{key:"removeStatusEffectByActorId",value:function(e){this.statusEffects=this.statusEffects.filter((function(t){return t.actor.id!==e||(t.onStop(),!1)}))}},{key:"removeDeadStatusEffects",value:function(){this.statusEffects=this.statusEffects.filter((function(e){return!(e.lifespan>=0&&e.timeToLive<=0)||(e.onStop(),!1)}))}},{key:"getStatusEffectsByActorId",value:function(e){return this.statusEffects.filter((function(t){return t.actor.id===e}))}},{key:"processStatusEffects",value:function(e){this.statusEffects.forEach((function(t){t.timeSinceLastStep+=e,t.timeToLive-=e,t.timeSinceLastStep>=t.stepInterval&&(t.onStep(),t.timeSinceLastStep=0)})),this.removeDeadStatusEffects()}},{key:"processActionFX",value:function(){var e=Object(j.a)(k.a.mark((function e(t,a){var n,r=this;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=11;break}return n=new ft({game:this.game,name:"particle",passable:!0,pos:Object(c.a)({},t.actor.pos),renderer:oe.fail.renderer}),this.game.placeActorOnMap(n),this.game.draw(),e.next=6,x(100);case 6:return this.game.removeActorFromMap(n),n.update(1),this.game.draw(),t.removeDeadParticles(),e.abrupt("return",!0);case 11:if(!t.particles.length){e.next=23;break}case 12:if(!(t.particles.length>0)){e.next=22;break}return t.particles.forEach((function(e){r.game.placeActorOnMap(e)})),this.game.draw(),e.next=17,x(t.processDelay);case 17:t.particles.forEach((function(e){r.game.removeActorFromMap(e),e.update(1)})),this.game.draw(),t.removeDeadParticles(),e.next=12;break;case 22:return e.abrupt("return",!0);case 23:return e.abrupt("return",!1);case 24:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"addActor",value:function(e){this.actors.push(e)}},{key:"addActorAsPrevious",value:function(e){this.actors.splice(this.currentActor,0,e)}},{key:"addActorAsNext",value:function(e){this.actors.splice(this.currentActor+1,0,e)}},{key:"setActorToPrevious",value:function(e){this.currentActor-=1,this.currentActor<=-1&&(this.currentActor=this.actors.length-1)}},{key:"setActorToNext",value:function(e){this.currentActor=(this.currentActor+1)%this.actors.length}}]),e}()),yt=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"process",value:function(){var e=Object(j.a)(k.a.mark((function e(){var t,a,n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.actors[this.currentActor],a=!0;case 2:if(!a){e.next=26;break}if(!t.hasEnoughEnergy()){e.next=23;break}if(n=t.getAction(this.game)){e.next=7;break}return e.abrupt("return",!1);case 7:return this.game.draw(),e.next=11,n.perform();case 11:return r=e.sent,e.next=14,x(n.processDelay);case 14:if(r.success){e.next=16;break}return e.abrupt("return",!1);case 16:if(null!==r.alternative){e.next=18;break}return e.abrupt("break",21);case 18:n=r.alternative,e.next=7;break;case 21:e.next=24;break;case 23:a=!1;case 24:e.next=2;break;case 26:if(this.currentActor+=1,!(this.currentActor+1>=this.actors.length)){e.next=31;break}return this.currentActor=0,this.actors.forEach((function(e){return e.gainEnergy(e.speed)})),e.abrupt("return",!1);case 31:return e.abrupt("return",!0);case 32:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=Object(j.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.isRunning=!0;case 1:if(!this.isRunning){e.next=7;break}return e.next=4,this.process();case 4:this.isRunning=e.sent,e.next=1;break;case 7:return t=this.actors[this.currentActor],this.setVisibleKeymap(t),this.game.mode.update(),e.next=12,this.game.updateReact(this.game);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(mt),bt=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"GROUND",i=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,o=0;o<s;o++)for(var u=0;u<c;u++)if(o>=t.y&&o<=t.y+(a-1)&&u>=t.x&&u<=t.x+(n-1)){var l="".concat(u,",").concat(o),h=0;e[r].animation&&(h=w(0,e[r].animation.length)),i[l]={type:r,currentFrame:h,entities:[]}}},vt=function(e,t,a){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:12,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4,i=(arguments.length>5&&void 0!==arguments[5]&&arguments[5],{}),s=Ot(),c=1e3;s.length<n+1;){var o=kt(s);if(o){var u=xt(o,t,a,r),l=Ct(e,u,r,0);l&&s.push(o)}if((c-=1)<=0)break}return wt(e),Tt(e,s.length),i},Ot=function(){return[{x:0,y:0}]},kt=function(e){for(var t=C(e),a=jt(t),n=Et(a,e),r=1e3;n;)if(t=C(e.filter((function(e){return n=t,!((a=e).x===n.x&&a.y===n.y);var a,n}))),a=jt(t),n=Et(a,e),(r-=1)<=0){n=!1,a=!1;break}return a},jt=function(e){return C(At(e))},Et=function(e,t){return t.filter((function(t){return t.x===e.x&&t.y===e.y})).length>0},xt=function(e,t,a,n){return{x:e.x+t+n*e.x,y:e.y+a+n*e.y}},At=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=[{x:e.x,y:e.y+1},{x:e.x+1,y:e.y},{x:e.x,y:e.y-1},{x:e.x-1,y:e.y}];return t&&(a=a.concat([{x:e.x+1,y:e.y+1},{x:e.x+1,y:e.y-1},{x:e.x-1,y:e.y-1},{x:e.x-1,y:e.y+1}])),a},Ct=function(e,t,a,n){for(var r=a+1-n,i=!1,s=0;s<r;s++)for(var c=0;c<r;c++){var o={x:t.x+s,y:t.y+c};e[T(o)]||(i=!0)}if(!i)for(var u=0;u<r;u++)for(var l=0;l<r;l++){var h={x:t.x+u,y:t.y+l},d="FLOOR";0!==u&&u!==r-1||(d="WALL"),0!==l&&l!==r-1||(d="WALL");var p=e[T(h)];p&&(p.type=d)}return!i},wt=function(e){Object.keys(e).filter((function(t){return"WALL"===e[t].type})).filter((function(t){var a=t.split(",").map((function(e){return parseInt(e)})),n={x:a[0],y:a[1]};return 8===At(n,!0).filter((function(t){var a=e[T(t)];return!(!a||!["WALL","FLOOR"].includes(a.type))})).length})).forEach((function(t){e[t].type="FLOOR"}))},Tt=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a=Object.keys(e).filter((function(t){if("WALL"!==e[t].type)return!1;var a=t.split(",").map((function(e){return parseInt(e)})),n={x:a[0],y:a[1]};return 2===At(n,!1).filter((function(t){var a=e[T(t)];return!(!a||!["GROUND"].includes(a.type))})).length})),n=0;n<t;){var r=C(a),i=r.split(",").map((function(e){return parseInt(e)})),s={x:i[0],y:i[1]},o=At(s,!1).filter((function(t){var a=e[T(t)];return!(!a||!["WALL"].includes(a.type))})),u=C(o);if(u){for(var l={x:Math.sign(u.x-s.x),y:Math.sign(u.y-s.y)},h=100,d=!0,p=Object(c.a)({},s),g=[];d;){p.x+=l.x,p.y+=l.y;var f=e[T(p)];if(!f)break;if("FLOOR"===f.type)f.type="WALL",g.push(Object(c.a)({},p));else if("GROUND"===f.type||"WALL"===f.type&&g.length){var m={x:p.x-2*l.x,y:p.y-2*l.y};e[T(m)].type="DOOR",m={x:p.x-3*l.x,y:p.y-3*l.y},e[T(m)].type="DOOR",g.length<=0&&t<=100&&(t+=1);break}(h-=1)<=0&&(d=!1)}n+=1}}},Pt=a(55),Rt="#07111Dff",St="#fdf6e3",_t="#dc322f",Nt="#859900",Dt="#3e7dc9",It="#423a18",Mt="#96641Dff",Lt="#E19D3Fff",Gt="#833139ff",Ut="#CC7468ff",qt="#DDA78Fff",Bt="#6D7886ff",Wt={GROUND:{background:"#02252e",foreground:"#586e75",character:".",sprite:"\ue8a2",passable:!0},EMERGENCE_DESTROYED:{background:Rt,foreground:It,character:"",sprite:"\ue805",passable:!0},EMERGENCE_GROUND:{background:It,foreground:Mt,character:".",sprite:"\ue803",passable:!0},EMERGENCE_OUTER_GROUND:{background:It,foreground:Lt,character:".",sprite:"\ue8a3",passable:!0},FLOOR:{background:"#073642",foreground:Mt,character:"",passable:!0},WALL:{background:It,foreground:Lt,character:"#",sprite:"\ue802",passable:!1},DOOR:{background:It,foreground:"#93a1a1",character:"+",sprite:"\ue86d",passable:!0},SAFE:{background:It,foreground:Nt,character:"+",sprite:"\ue8b2",passable:!0}},Ht={amount:{background:Rt,foreground:Lt,character:"#"},attackRange:{background:Nt,foreground:St,character:"==>"},magazine:{background:Bt,foreground:St,character:"!!"},baseRangedAccuracy:{background:"#6c71c4",foreground:St,character:"*"},baseRangedDamage:{background:_t,foreground:St,character:"x",sprite:"\ue890"},meleeDamage:{background:_t,foreground:St,character:"x",sprite:"\ue888"}},Ft={Jacinto:function(e){function t(e){var a,n=Object.assign({},e);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},n)))).data={level:1,highestLevel:null,turnCount:0},a.dataByLevel=[{enemies:Array(1).fill("Bandit")},{enemies:Array(10).fill("Bandit")}],a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"initialize",value:function(){var e=this;Object(be.a)(Object(h.a)(t.prototype),"initialize",this).call(this),this.game.tileKey=Wt,this.game.createEmptyLevel(),this.game.initializeMapTiles(),this.setWaveData(),bt(this.game.tileKey,{x:31,y:9},4,4,"SAFE",this.game.map,this.game.mapHeight,this.game.mapWidth),vt(this.game.map,10,10,2,4),vt(this.game.map,20,5,6,4),this.placePlayersInSafeZone();var a=Object.keys(this.game.map).filter((function(t){return"GROUND"===e.game.map[t].type}));this.data.enemies.forEach((function(t){var n=C(a).split(",").map((function(e){return parseInt(e)}));e["add".concat(t)]({x:n[0],y:n[1]})}));for(var n=0;n<20;n++){var r=C(a).split(",").map((function(e){return parseInt(e)}));this.addCover({x:r[0],y:r[1]})}for(var i=0;i<2;i++){var s=C(a).split(",").map((function(e){return parseInt(e)}));this.addEmerenceHole({x:s[0],y:s[1]})}}},{key:"getPlayers",value:function(){return this.game.engine.actors.filter((function(e){return e.entityTypes.includes("PLAYING")}))}},{key:"updateUI",value:function(){var e=this;he.each(this.getPlayers(),(function(t,a){var n=Math.floor(t.energy/100),r=Math.floor(t.speed/100),i=[].concat(Object(z.a)(Array(n).fill("\ue8b2")),Object(z.a)(Array(r-n).fill("_")));e.createOrUpdateInfoBlock("playerSpeed".concat(t.id),{text:"".concat(t.name," | AP: ").concat(i.join(" "))})}))}},{key:"update",value:function(){Object(be.a)(Object(h.a)(t.prototype),"update",this).call(this),this.hasWon()&&this.game.toWin(),this.hasLost()&&(Ge.lose.play(),this.game.toLose(),this.reset(),this.game.initializeGameData()),this.levelComplete()&&(this.nextLevel(),this.setWaveData(),this.initialize())}},{key:"setLevel",value:function(e){this.data.level=e,this.data.turnCount=0}},{key:"nextLevel",value:function(){this.setLevel(this.data.level+1)}},{key:"reset",value:function(){this.setLevel(1),this.initialize()}},{key:"setWaveData",value:function(){var e=this.data.level-1,t=he.get(this.dataByLevel,e,{});this.data=Object(c.a)({},this.data,{},t)}},{key:"levelComplete",value:function(){return 1===this.game.engine.actors.length}},{key:"hasWon",value:function(){return this.data.level>this.dataByLevel.length}},{key:"hasLost",value:function(){var e=this.getPlayers();return!e.length||!!(e.length&&e[0].durability<=0)}},{key:"addEmerenceHole",value:function(e){var t=this;bt(this.game.tileKey,{x:e.x-1,y:e.y-1},3,3,"EMERGENCE_GROUND",this.game.map,this.game.mapHeight,this.game.mapWidth);var a=new gt({name:"Hole",pos:e,game:this.game,passable:!0,renderer:{character:"",sprite:"\ue80a",color:Mt,background:Rt},timeToSpread:1,spreadCount:3,durability:1,speed:100,getSpawnedEntity:function(e){var a=t.getPlayers()[0],n=t.getBanditStats();return new n.entityClass({targetEntity:a,pos:e,renderer:n.renderer,name:n.name,game:t.game,actions:[],attackDamage:n.attackDamage,durability:n.durability,speed:n.speed,getProjectile:function(e){var a=e.pos,n=(e.targetPos,e.direction),r=e.range;return et(t.game.engine,Object(c.a)({},a),n,r)}})},onDestroy:function(){return t.game.map[T(e)].type="EMERGENCE_DESTROYED"}});this.game.placeActorOnMap(a)&&(this.game.engine.addActor(a),this.game.draw())}},{key:"addCover",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"box",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"%",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:It,i=C(["\ue83b","\ue873","\ue874","\ue875","\ue876","\ue877"]);switch(a){case"%":i=C(["\ue83b","\ue873"]);break;case"m":i=C(["\ue874","\ue875"]);break;case"H":i=C(["\ue876","\ue877"]);break;case"Xs":i="\ue86a";break;case"X":i="\ue86b";break;case"XL":i="\ue86c";break;default:i="\ue873"}var s=new st({pos:e,renderer:{character:a,sprite:i,color:Lt,background:r},name:t,game:this.game,durability:n,accuracyModifer:-.3,damageModifer:0});this.game.placeActorOnMap(s)}},{key:"getBanditStats",value:function(){var e=[{name:"Grub",renderer:{character:C(["g"]),color:Ut,background:Gt,sprite:"\ue827"},durability:3,attackDamage:1,speed:100,entityClass:ot},{name:"Wretch",renderer:{character:C(["w"]),color:Gt,background:qt,sprite:"\ue8d7"},durability:1,attackDamage:1,speed:500,entityClass:ct}];return C(e)}},{key:"addBandit",value:function(e){var t=this,a=this.getPlayers()[0],n=this.getBanditStats(),r=new n.entityClass({targetEntity:a,pos:e,renderer:n.renderer,name:n.name,game:this.game,actions:[],attackDamage:n.attackDamage,durability:n.durability,speed:n.speed,getProjectile:function(e){var a=e.pos,n=(e.targetPos,e.direction),r=e.range;return et(t.game.engine,Object(c.a)({},a),n,r)}});this.game.placeActorOnMap(r)&&this.game.engine.addActor(r)}},{key:"placePlayersInSafeZone",value:function(){var e=this,t=this.getPlayers(),a=Object.keys(this.game.map).filter((function(t){return"SAFE"==e.game.map[t].type}));t.forEach((function(t){var n=a.shift();if(n){var r={x:parseInt(n.split(",")[0]),y:parseInt(n.split(",")[1])};t.pos=r;var i=e.game.map[n];i&&i.entities.push(t)}}))}}]),t}(function(){function e(t){var a=t.game,n=void 0===a?null:a,r=t.data,i=void 0===r?{}:r;Object(o.a)(this,e);var s=W()();this.id=s,this.game=n,this.data=i,this.infoBlocks={},this.progressBars={}}return Object(u.a)(e,[{key:"initialize",value:function(){}},{key:"update",value:function(){}},{key:"createOrUpdateInfoBlock",value:function(e,t){Object(he.merge)(this.infoBlocks,Object(Pt.a)({},e,t))}}]),e}())},zt=function(){function e(t){var a=t.engine,n=void 0===a?null:a,r=t.map,i=void 0===r?{}:r,s=t.entityMap,c=void 0===s?{}:s,u=t.entityDictionary,l=void 0===u?{}:u,h=t.mapInitialized,d=void 0!==h&&h,p=t.tileMap,g=void 0===p?{}:p,f=t.mapWidth,m=void 0===f?60:f,y=t.mapHeight,b=void 0===y?25:y,v=t.cameraWidth,O=void 0===v?60:v,k=t.cameraHeight,j=void 0===k?25:k,E=t.tileWidth,x=void 0===E?30:E,A=t.tileHeight,C=void 0===A?30:A,w=t.tileOffset,T=void 0===w?0:w,P=t.getSelectedCharacter,R=void 0===P?function(){return!1}:P,S=t.spriteMode,_=void 0===S||S,N=t.tileKey,D=void 0===N?Z:N,I=t.mode,M=void 0===I?Ft.Flume:I,L=t.messages,G=void 0===L?[]:L;Object(o.a)(this,e),this.engine=n,this.map=i,this.entityMap=c,this.entityDictionary=l,this.mapInitialized=d,this.tileMap=g,this.mapWidth=m,this.mapHeight=b,this.cameraWidth=O,this.cameraHeight=j,this.tileWidth=x,this.tileHeight=C,this.tileOffset=T,this.display=new we({containerId:"display",width:1800,height:750,tileWidth:x,tileHeight:C,tileOffset:T,game:this}),this.spriteMode=_,this.tileKey=D,this.mode=new M({game:this}),this.messages=G,this.getSelectedCharacter=R}return Object(u.a)(e,[{key:"initializeMode",value:function(){this.mode.initialize()}},{key:"updateMode",value:function(){this.mode.update()}},{key:"randomlyPlaceActorOnMap",value:function(e){for(var t=0,a=!1;!a;){var n=I(this.map).coordinates;if(this.canOccupyPosition(n,e)){var r=this.map[T(n)];e.pos=Object(c.a)({},n),r.entities.push(e),a=!0}(t+=1)>=100&&(a=!0)}return a}},{key:"randomlyPlaceAllActorsOnMap",value:function(){var e=this;this.engine.actors.forEach((function(t){e.randomlyPlaceActorOnMap(t)}))}},{key:"placeActorsOnMap",value:function(){var e=this;this.engine.actors.forEach((function(t){var a=e.map[T(t.pos)];a?a.entities.push(t):console.log("could not place ".concat(t.id,": ").concat(t.name," on map"))}))}},{key:"placeActorOnMap",value:function(e){var t=this.map[T(e.pos)];return t?(t.entities.push(e),!0):(console.log("could not place ".concat(e.id,": ").concat(e.name," on map")),!1)}},{key:"removeActorFromMap",value:function(e){var t=this.map[T(e.pos)];return!!t&&(this.map[T(e.pos)].entities=t.entities.filter((function(t){return t.id!==e.id})),!0)}},{key:"createLevel",value:function(){var e=new E.a.Arena(this.mapWidth,this.mapHeight),t=[];e.create(function(e,a,n){var r=e+","+a,i="GROUND",s=0;n&&(i="WALL"),this.tileKey[i].animation&&(s=w(0,this.tileKey[i].animation.length)),this.map[r]={type:i,currentFrame:s,entities:[]},t.push(r)}.bind(this)),this.randomlyPlaceAllActorsOnMap()}},{key:"createEmptyLevel",value:function(){for(var e=0;e<this.mapHeight;e++)for(var t=0;t<this.mapWidth;t++){var a="".concat(t,",").concat(e),n=0;this.tileKey.GROUND.animation&&(n=w(0,this.tileKey.GROUND.animation.length)),this.map[a]={type:"GROUND",currentFrame:n,entities:[]}}}},{key:"createCustomLevel",value:function(e){var t=this;Object.keys(e.tiles).forEach((function(a,n){var r=e.tiles[a].data.type,i=0;r||(r="GROUND"),t.tileKey[r].animation&&(i=w(0,t.tileKey[r].animation.length)),t.map[a]={type:r,currentFrame:i,entities:[]}}))}},{key:"canOccupyPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{passable:!1},a=!1,n=this.map[T(e)];if(n){var r=n.entities.filter((function(e){return!e.passable})).length>0;if(!r||t.passable){var i=this.map[T(e)];this.tileKey[i.type].passable&&(a=!0)}}return a}},{key:"rangedCursorCanOccupyPosition",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=!1,a=this.map[T(e)];if(a){var n=this.map[T(e)];this.tileKey[n.type].passable&&(t=!0)}return t}},{key:"cursorCanOccupyPosition",value:function(e){var t=!1;return this.map[T(e)]&&(t=!0),t}},{key:"show",value:function(e){this.display.initialize(e)}},{key:"getRenderMap",value:function(e,t,a,n,r,i){var s=Math.floor(a/2),c=Math.floor(n/2),o=0,u=0;t&&(o=t.x-s,u=t.y-c),o=A(o,0,r-a),u=A(u,0,i-n);var l={};for(var h in e){var d=h.split(","),p=parseInt(d[0])-o,g=parseInt(d[1])-u;p>=0&&p<=a&&g>=0&&g<=n&&(l["".concat(p,",").concat(g)]=e[h])}return l}},{key:"processTileMap",value:function(e){var t=this.getRenderMap(this.map,this.getPlayerPosition(),this.cameraWidth,this.cameraHeight,this.mapWidth,this.mapHeight);for(var a in t){var n=a.split(","),r=parseInt(n[0]),i=parseInt(n[1]),s=t[a],c=this.tileKey[s.type],o=this.animateTile(s,c),u=o.character,l=o.foreground,h=o.background,d=s.entities.filter((function(e){return e.entityTypes.includes("RENDERING")}));if(d.length>0){var p=d[d.length-1];u=(o=this.animateEntity(p)).character,l=o.foreground,o.background&&(h=o.background)}e(a,r,i,u,l,h)}}},{key:"initializeMapTiles",value:function(){var e=this;if(this.mapInitialized)return!1;this.mapInitialized=!0,this.processTileMap((function(t,a,n,r,i,s){var c=e.display.createTile(a,n,r,i,s);e.tileMap[t]=c}))}},{key:"getPlayers",value:function(){return this.engine.actors.filter((function(e){return e.entityTypes.includes("PLAYING")}))}},{key:"getFirstPlayer",value:function(){var e=this.getPlayers();return e.length?e[0]:null}},{key:"getPlayerPosition",value:function(){return this.getFirstPlayer().pos}},{key:"draw",value:function(){var e=this;this.processTileMap((function(t,a,n,r,i,s){e.display.updateTile(e.tileMap[t],r,i,s)})),this.display.draw()}},{key:"getEntityRenderer",value:function(e){return this.spriteMode&&e.hasOwnProperty("sprite")?Object(c.a)({},e,{character:e.sprite,foreground:e.color}):Object(c.a)({},e,{foreground:e.color})}},{key:"getTileRenderer",value:function(e){return this.spriteMode&&e.hasOwnProperty("sprite")?Object(c.a)({},e,{character:e.sprite}):e}},{key:"animateEntity",value:function(e){var t=e.getRenderer(),a=this.getEntityRenderer(t),n=a.character,r=a.foreground,i=a.background;if(t.animation){var s=this.getEntityRenderer(t.animation[e.currentFrame]);n=s.character,r=s.foreground,i=s.background,e.currentFrame=(e.currentFrame+1)%t.animation.length}return{character:n,foreground:r,background:i}}},{key:"animateTile",value:function(e,t){var a=this.getTileRenderer(t),n=a.character,r=a.foreground,i=a.background;if(t.animation){var s=this.getTileRenderer(t.animation[e.currentFrame]);n=s.character,r=s.foreground,i=s.background,e.currentFrame=(e.currentFrame+1)%t.animation.length}return{character:n,foreground:r,background:i}}},{key:"addActor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.engine,a=this.placeActorOnMap(e);return!!a&&(t.actors.push(e),this.draw(),!0)}},{key:"placeAndDrawActor",value:function(e){this.placeActorsOnMap(),this.draw()}},{key:"removeActor",value:function(e){this.engine.actors=this.engine.actors.filter((function(t){return t.id!==e.id})),this.removeActorFromMap(e),this.draw()}},{key:"initializeUI",value:function(e,t){this.show(t),e.current.focus()}},{key:"initializeGameData",value:function(){var e=this;this.engine.game=this;var t=this.getSelectedCharacter();this.engine.actors=[t],this.engine.actors.forEach((function(t){t.game=e})),this.initializeMode(),this.draw()}},{key:"initialize",value:function(e,t){var a=this;this.initializeUI(e,t),this.initializeGameData(),setTimeout((function(){a.spriteMode=!1,a.draw()}),500),setTimeout((function(){a.spriteMode=!0,a.draw()}),500)}},{key:"addMessage",value:function(e,t){var a=new Pe({text:e,type:t});this.messages.push(a)}}]),e}(),Kt=function(e,t){if(!t.isRunning){var a=t.actors[t.currentActor],n=null;try{n=a.getKeymap()}catch(i){console.log("keypress error"),console.log(i)}if(n){var r=e.key;if(!(r in n))return;(0,n[r])().setAsNextAction(),t.start()}}},Yt=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=he.get(this.props.game,"mode.infoHeader",null),a=he.get(this.props.game,"mode.infoBlocks",{});return r.a.createElement("div",{className:"Instructions UI"},t&&r.a.createElement("p",{className:"flow-text"},t),r.a.createElement("div",{className:"flow-text"},he.map(a,(function(e,t){return r.a.createElement("div",{key:t,className:"Instructions__block"},e.text)})),r.a.createElement("div",{className:"Instructions__block",onClick:function(){return e.props.setActiveScreen(f)}},r.a.createElement("button",{className:"btn btn-main"},"Restart")),r.a.createElement("div",{className:"Instructions__block",onClick:function(){return e.props.toggleSpriteMode()}},r.a.createElement("button",{className:"btn btn-main"},this.props.spriteMode?"ASCII mode":"Sprite mode")),r.a.createElement("div",{className:"Instructions__block"},r.a.createElement("button",{"data-target":"jacinto_help",className:"btn btn-main modal-trigger"},"Help"))))}}]),t}(r.a.Component);var Xt=function(e){var t=e.color;return t||(t="grey"),r.a.createElement("button",{onClick:e.onClick,className:"Button btn ".concat(t)},e.children)};r.a.Component;var Jt=function(e){var t=e.title,a=void 0===t?"Effect":t,n=e.text,i=void 0===n?"":n,s=e.children;return r.a.createElement("div",{className:"Tooltip"},s,r.a.createElement("div",{className:"top"},r.a.createElement("h3",null,a),r.a.createElement("p",null,i),r.a.createElement("i",null)))},Vt=a(21);function Qt(e){var t=e.resource,a=e.superScript,n=e.canPay,i=t.renderer.sprite?t.renderer.sprite:t.renderer.character;return r.a.createElement("div",{className:"ResourceBlock",style:{backgroundColor:n?t.renderer.background:"#616161",color:n?t.renderer.color:"#bdbdbd",borderColor:n?t.renderer.color:"#bdbdbd",fontFamily:"scroll-o-script",width:a?"auto":20}},"".concat(a?a+" ":"").concat(i))}var Zt=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"ActionBar"},r.a.createElement("div",{className:"CharacterActions"},this.props.keymap&&Object.entries(this.props.keymap).map((function(t,a){var n=Object(Vt.a)(t,2),i=n[0],s=(0,n[1])(),c=he.get(s,"hidden",!1),o=he.get(s,"renderer",null),u=s.listPayableResources();if(!c)return r.a.createElement(Jt,{key:"".concat(a,"-label"),title:s.label,text:s.label+" ".concat(s.actor.name)},r.a.createElement("div",{className:"CharacterActions__item",onClick:function(){s.setAsNextAction(),e.props.game.engine.isRunning||e.props.game.engine.start(),e.props.game.refocus()}},r.a.createElement("div",{className:"CharacterActions__item__label"},s.label),r.a.createElement("div",{className:"CharacterActions__item__content",style:o&&{backgroundColor:o.background,color:o.color,borderColor:o.color}},i),r.a.createElement("div",{className:"CharacterActions__item__resources"},u.map((function(e,t){var a=e.getResourceCost();return a>0&&r.a.createElement(Qt,{key:"".concat(t,"-").concat(e.name,"-resource-block"),superScript:a,resource:e,canPay:e.canPay})})))))}))))}}]),t}(r.a.Component);function $t(e){var t=e.actor;return r.a.createElement("div",{className:"Portrait",style:{backgroundColor:t.renderer.background,color:t.renderer.color,borderColor:t.renderer.color}},t.renderer.sprite?t.renderer.sprite:t.renderer.character)}function ea(e){var t=e.effect;return r.a.createElement("div",{className:"StatusEffects__effect",style:{backgroundColor:t.renderer.background,color:t.renderer.color,borderColor:t.renderer.color}},t.renderer.sprite?t.renderer.sprite:t.renderer.character)}function ta(e){var t=e.actor;return r.a.createElement("div",{className:"StatusEffects"},t.game.engine.getStatusEffectsByActorId(t.id).map((function(e,t){return r.a.createElement(Jt,{key:t,title:e.name,text:e.name},r.a.createElement(ea,{effect:e}))})))}function aa(e){var t=e.actor;return r.a.createElement("div",{className:"NamePlate"},t.name)}function na(e){var t=e.actor,a=e.label,n=e.colorFilled,i=void 0===n?"red":n,s=e.colorEmpty,c=void 0===s?"gray":s,o=e.attributePathMax,u=e.attributePath,l=e.unit,h=he.get(t,o,0)/l,d=he.get(t,u,0)/l;return r.a.createElement("div",{className:"ProgressBar"},r.a.createElement("div",null,r.a.createElement("span",{className:"ProgressBar__label"},a)),r.a.createElement("div",null,r.a.createElement("div",{className:"ProgressBar__blips"},Array(h).fill(!0).map((function(e,t){return r.a.createElement("span",{key:t,className:"ProgressBar__blips__blip",style:{backgroundColor:d>t?i:c}})})))))}var ra=function(e){var t=e.actor,a=e.game;return r.a.createElement("div",{className:"CharacterCard"},r.a.createElement($t,{actor:t}),r.a.createElement("div",null,r.a.createElement(aa,{actor:t}),r.a.createElement(na,{label:"Action Points",attributePath:"energy",attributePathMax:"speed",colorFilled:"#ff9926",unit:100,actor:t}),r.a.createElement(na,{label:"Chakara Points",attributePath:"charge",attributePathMax:"chargeMax",colorFilled:"#13b8d7",unit:1,actor:t}),r.a.createElement(na,{label:"Upgrade Points",attributePath:"upgrade_points",attributePathMax:"upgrade_points",colorFilled:"#3e7dc9",unit:1,actor:t}),r.a.createElement(ta,{actor:t})),r.a.createElement("div",null,r.a.createElement(Zt,{keymap:t.getKeymap(),game:a})))},ia=function(e){var t=e.game,a=t.engine.actors.filter((function(e){return e.entityTypes.includes("PRESENTING_UI")})).filter((function(e){return e.presentingUI}));return r.a.createElement("div",{className:"PlayerInformation Information UI"},r.a.createElement("div",{className:"CharacterCard_Container"},a.map((function(e,a){return r.a.createElement(ra,{key:a,actor:e,game:t})}))))};r.a.Component;function sa(e){return r.a.createElement("div",{className:"Message",style:{color:e.color,backgroundColor:e.backgroundColor,borderColor:e.color}},e.children)}r.a.Component;var ca=a(37),oa=function(e){function t(e){var a,n=e.item,r=Object(F.a)(e,["item"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},r)))).item=n,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"perform",value:function(){var e=!1;if(this.item.equipmentType){var t=this.actor.getItemInSlot(this.item.equipmentType);t&&(this.actor.addToContainer(t),this.actor.unequip(t)),this.actor.removeFromContainer(this.item),this.actor.equip(this.item.equipmentType,this.item),this.game.addMessage("".concat(this.actor.name," equips ").concat(this.item.name,"."),Te.ACTION),e=!0}return{success:e,alternative:null}}}]),t}(ge);function ua(e){var t=e.stat,a=t.getIcon,n=t.value,i=t.name,s=t.renderer.sprite?t.renderer.sprite:t.renderer.character;return r.a.createElement("div",{className:"StatBlock",style:{backgroundColor:t.renderer.background,color:t.renderer.foreground,borderColor:t.renderer.foreground,fontFamily:"scroll-o-script",width:null!==t.value?"auto":20},title:i},a?a():"".concat(s),r.a.createElement("span",null,"\xa0",n))}var la=function(e){var t=e.game,a=e.player,n=e.data,i=n.item,s=n.equipped,c=n.amount,o=!1,u=function(){return null};if(n.equipable){var l=new oa({item:i,game:t,energyCost:0,actor:a,label:"Equip ".concat(i.name)});u=function(){t.refocus(),l.setAsNextAction(),t.engine.start()}}var h=[];return c&&h.push({name:"amount left",value:c,renderer:Ht.amount}),i.hasOwnProperty("attackRange")&&h.push({name:"attack range",value:i.attackRange,renderer:Ht.attackRange,getIcon:function(){return r.a.createElement(ca.b,null)}}),i.hasOwnProperty("magazine")&&(h.push({name:"shots before reload",value:i.magazine,renderer:Ht.magazine,getIcon:function(){return r.a.createElement(ca.c,null)}}),i.magazine<=0&&(o=!0)),i.hasOwnProperty("baseRangedAccuracy")&&h.push({name:"base accuracy",value:i.baseRangedAccuracy,renderer:Ht.baseRangedAccuracy,getIcon:function(){return r.a.createElement(ca.e,null)}}),i.hasOwnProperty("baseRangedDamage")&&h.push({name:"base damage",value:i.baseRangedDamage,renderer:Ht.baseRangedDamage,getIcon:function(){return r.a.createElement(ca.d,null)}}),i.hasOwnProperty("attackDamage")&&h.push({name:"base melee damage",value:i.attackDamage,renderer:Ht.meleeDamage}),r.a.createElement("div",{className:"EquipmentCard ".concat(s?"EquipmentCard--selected":""),onClick:function(){return t.refocus()}},o&&r.a.createElement("div",{className:"EquipmentCard__reload_overlay",onClick:function(){return a.reload()}},r.a.createElement("div",{className:"EquipmentCard__reload_overlay__text"},"Needs Reload"),r.a.createElement("div",{className:"EquipmentCard__reload_overlay__text"},r.a.createElement(ca.a,null))),r.a.createElement("div",{className:"EquipmentCard__item",onClick:u},r.a.createElement("div",{className:"EquipmentCard__item__label"},i.name),r.a.createElement("div",{className:"EquipmentCard__item__content",style:i.renderer&&{backgroundColor:i.renderer.background,color:i.renderer.color,borderColor:i.renderer.color}},i.renderer.sprite?i.renderer.sprite:i.renderer.character)),r.a.createElement("div",{className:"EquipmentCard__item__stats"},h.map((function(e,t){return r.a.createElement(ua,{key:"".concat(t,"-").concat(e.name,"-resource-block"),stat:e})}))))},ha=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){if(!this.props.player)return null;var e=this.props.player,t=this.props.game,a=[];return e.equipment.forEach((function(e){e.item&&a.push({item:e.item,equipped:!0})})),e.container.forEach((function(e){if(e.items.length){var t=e.items[0];if(0===a.filter((function(e){return e.item.name===t.name})).length){var n=t.entityTypes.includes("EQUIPABLE"),r=n?null:e.items.length;a.push({item:t,amount:r,equipable:n,equipped:!1})}}})),r.a.createElement("div",{className:"Equipment UI"},r.a.createElement("div",null,r.a.createElement("div",{className:"flow-text"},"Equipment"),r.a.createElement("div",null,a.map((function(a,n){return r.a.createElement(la,{key:n,game:t,player:e,data:a})})))))}}]),t}(r.a.Component);var da=function(e){return r.a.useLayoutEffect((function(){var t=document.querySelectorAll("#".concat(e.id));window.M.Modal.init(t)})),r.a.createElement("div",{id:e.id,className:"Jacinto_Help modal"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 m6"},r.a.createElement("div",{className:"Jacinto_Help__section_header"},"Goal"),r.a.createElement("div",{className:"Jacinto_Help__section_body"},"Defend Jacinto, the last human bastion on Sera. Move block by block and clear the city of",r.a.createElement("span",{className:"red-text"},"\xa0Grubs")," until you can locate and defeat their leader,",r.a.createElement("span",{className:"red-text"},"\xa0Skorge"),".")),r.a.createElement("div",{className:"col s12 m6"},r.a.createElement("div",{className:"Jacinto_Help__section_header"},"Hints"),r.a.createElement("div",{className:"Jacinto_Help__section_body"},r.a.createElement("div",null,"Stay in cover."),r.a.createElement("div",null,"Destroy ",r.a.createElement("span",{className:"red-text"},"Emergence Holes")," ASAP."),r.a.createElement("div",null,"Spend ",r.a.createElement("span",{className:"blue-text"},"Upgrade Points"))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"},r.a.createElement("div",{className:"Jacinto_Help__section_header"},"Controls"),r.a.createElement("div",{className:"Jacinto_Help__section_body"},r.a.createElement("div",null,"Movement: WASD"),r.a.createElement("div",null,"Actions: click or key press"))))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("a",{href:"#!",className:"modal-close waves-effect waves-green btn-flat"},"Close")))},pa=function(e){function t(e){var a;Object(o.a)(this,t),a=Object(l.a)(this,Object(h.a)(t).call(this,e));var n=new mt({}),i=new zt({engine:n,getSelectedCharacter:function(){return a.props.selectedCharacter.initialize(n)},mode:a.props.selectedMode.class});return a.state={game:i,activeTab:0,spriteMode:i.spriteMode},a.presserRef=r.a.createRef(),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(j.a)(k.a.mark((function e(){var t=this;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.state.game.initialize(this.presserRef,document),this.state.game.backToTitle=function(){return t.props.setActiveScreen(f)},this.state.game.toLose=function(){return t.props.setActiveScreen(y)},this.state.game.toWin=function(){return t.props.setActiveScreen(b)},this.state.game.refocus=function(){return t.refocus()},this.state.game.updateReact=function(e){t.setState({game:e})},this.state.game.engine.start();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"refocus",value:function(){this.presserRef&&this.presserRef.current.focus()}},{key:"toggleSpriteMode",value:function(){this.state.game.spriteMode=!this.state.game.spriteMode,this.state.game.draw(),this.refocus(),this.setState({spriteMode:this.state.game.spriteMode})}},{key:"render",value:function(){return r.a.createElement("div",{className:"Level"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s10"},r.a.createElement("div",{className:"game_display_container"},(e=this.presserRef,t=Kt,a=this.state.game.engine,r.a.createElement("div",{id:"display",ref:e,onKeyDown:function(e){return t(e,a)},tabIndex:"0"}))),r.a.createElement(da,{id:"jacinto_help"}),r.a.createElement(ia,{game:this.state.game}),r.a.createElement(Yt,{game:this.state.game,spriteMode:this.state.game.spriteMode,setActiveScreen:this.props.setActiveScreen,toggleSpriteMode:this.toggleSpriteMode.bind(this)})),r.a.createElement("div",{className:"col s2"},r.a.createElement(ha,{game:this.state.game,player:this.state.game.getFirstPlayer()}))));var e,t,a}}]),t}(r.a.Component),ga=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Title"},r.a.createElement("div",{style:{width:"100vw",height:"100vh",backgroundColor:"rgb(4, 49, 61)",backgroundImage:'url("'.concat(window.PUBLIC_URL,'/fire_man_blue.jpg")'),backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundPositionY:"10px"}},r.a.createElement("button",{style:{position:"relative",top:"280px"},className:"CharacterSelect__button btn btn-main",onClick:function(){e.props.setActiveScreen(v)}},"Play")))}}]),t}(r.a.Component),fa=function(e){return r.a.createElement("div",{className:"CharacterSelect"},e.characters.map((function(t,a){return e.selectedCharacter&&(e.selectedCharacter.name===t.name?"red":""),r.a.createElement("button",{key:a,style:{position:"relative",top:"280px"},className:"CharacterSelect__button btn btn-main",onClick:function(){e.setSelectedCharacter(t),e.setActiveScreen(m)}},"Play as ",t.name)})))},ma=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Title"},r.a.createElement("div",{style:{width:"100vw",height:"100vh",backgroundColor:"#222",backgroundImage:'url("'.concat(window.PUBLIC_URL,'/fire_man_blue.jpg")'),backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundPositionY:"10px"}},r.a.createElement(fa,{characters:this.props.characters,selectedCharacter:this.props.selectedCharacter,setSelectedCharacter:this.props.setSelectedCharacter,setActiveScreen:this.props.setActiveScreen})))}}]),t}(r.a.Component),ya=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Title"},r.a.createElement("div",{style:{width:"100vw",height:"100vh",backgroundColor:"rgb(54,160,190)",backgroundImage:'url("'.concat(window.PUBLIC_URL,'/fire_man_blue.jpg")'),backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundPositionY:"10px"}},r.a.createElement(fa,{characters:this.props.characters,selectedCharacter:this.props.selectedCharacter,setSelectedCharacter:this.props.setSelectedCharacter,setActiveScreen:this.props.setActiveScreen})))}}]),t}(r.a.Component),ba=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Title"},r.a.createElement("div",{style:{width:"100vw",height:"100vh",backgroundColor:"rgb(4, 49, 61)",backgroundImage:'url("'.concat(window.PUBLIC_URL,'/fire_man_blue.jpg")'),backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundPositionY:"10px"}},r.a.createElement(fa,{characters:this.props.characters,selectedCharacter:this.props.selectedCharacter,setSelectedCharacter:this.props.setSelectedCharacter,setActiveScreen:this.props.setActiveScreen})))}}]),t}(r.a.Component),va=function(e){return r.a.createElement("div",{className:"CharacterSelect"},e.modes.map((function(t,a){return e.selectedMode&&(e.selectedMode.name===t.name?"red":""),r.a.createElement("button",{key:a,style:{position:"relative",top:"280px"},className:"CharacterSelect__button btn btn-main",onClick:function(){console.log(t),e.setSelectedMode(t),e.setActiveScreen(v)}},t.name)})))},Oa={Level:pa,Title:ga,Win:ya,Lose:ma,CharacterSelect:ba,ModeSelect:function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Title"},r.a.createElement("div",{style:{width:"100vw",height:"100vh",backgroundColor:"rgb(4, 49, 61)",backgroundImage:'url("'.concat(window.PUBLIC_URL,'/fire_man_blue.jpg")'),backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundPositionY:"10px"}},r.a.createElement(va,{modes:this.props.modes,selectedMode:this.props.selectedMode,setSelectedMode:this.props.setSelectedMode,setActiveScreen:this.props.setActiveScreen})))}}]),t}(r.a.Component)},ka=function(e){function t(e){var a,n=Object.assign({},e);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},n)))).name="Chakra",a.actorResourcePath="charge",a.renderer={color:"#224c92",background:"#13b8d7",character:"*",sprite:"\ue8bf"},a}return Object(d.a)(t,e),t}(de),ja=function(e){function t(e){var a,n=Object.assign({},e);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},n)))).label="Close",a.processDelay=0,a.energyCost=0,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"perform",value:function(){return this.actor.goToPreviousKeymap(),{success:!0,alternative:null}}}]),t}(ge),Ea=function(e){function t(e){var a,n=e.direction,r=e.range,i=Object(F.a)(e,["direction","range"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},i)))).direction=n,a.range=r,a.processDelay=0,a.energyCost=0,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"perform",value:function(){var e,t,a=this,n=!1,r=this.actor.getPosition(),i=(e=this.actor.getCursorPositions()[0],t=this.direction,{x:e.x+t[0],y:e.y+t[1]}),s=N(r,i),c=!this.range||s.length<=this.range,o=s.reduce((function(e,t){return e&&a.game.rangedCursorCanOccupyPosition(t)}),!0);return c&&o&&this.game.rangedCursorCanOccupyPosition(i,this.actor)&&(this.actor.moveCursorInDirection(this.direction),n=!0),{success:n,alternative:null}}}]),t}(ge),xa=function(e){function t(e){var a,n=e.targetPositions,r=e.processDelay,i=void 0===r?25:r,s=Object(F.a)(e,["targetPositions","processDelay"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},s)))).targetPositions=n,a.processDelay=i,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"perform",value:function(){var e=this,t=!1;if(!this.actor.entityTypes.includes("RANGED_ATTACKING"))return{success:!0,alternative:new Be({message:"Ooh I don't know how to attack",game:this.game,actor:this.actor})};var a=[],n={x:this.actor.pos.x,y:this.actor.pos.y},r=this.particleTemplate.renderer;return this.targetPositions.forEach((function(i){var s=e.actor.rangedAttack(i),o=Object(Vt.a)(s,2),u=o[0],l=o[1];a.push(i),u&&(t=!0,l?e.addParticle(a.length+1,n,null,r,le,a):(t=!0,e.addParticle(1,Object(c.a)({},i),{x:0,y:0},oe.fail.renderer)))})),{success:t,alternative:null}}}]),t}(ge),Aa=function(e){function t(e){var a,n=e.passThroughEnergyCost,r=void 0===n?100:n,i=e.passThroughRequiredResources,s=void 0===i?[]:i,u=Object(F.a)(e,["passThroughEnergyCost","passThroughRequiredResources"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},u)))).passThroughEnergyCost=r,a.passThroughRequiredResources=s,a.processDelay=0,a.energyCost=0,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"updateCursors",value:function(e,t){var a=this,n=this.actor.getCursorPositions(),r=N(t,this.actor.getCursorPositions()[0]);e.forEach((function(e){a.game.display.removeAnimation(e.id)})),r.slice(1).forEach((function(t){if(!Object(he.find)(n,{x:t.x,y:t.y})){var r=a.game.display.addAnimation(1,{x:t.x,y:t.y,color:Q.base3});e.push(r)}})),n.forEach((function(e,t){var n=a.actor.getRangedAttackChance(e);n<=0&&a.actor.changeCursorColor(t,"transparent"),n>0&&n<=.5&&a.actor.changeCursorColor(t,Q.red),n>.5&&n<=.7&&a.actor.changeCursorColor(t,Q.yellow),n>=.7&&a.actor.changeCursorColor(t,Q.green)}))}},{key:"perform",value:function(){var e=this,t=this.actor.getPosition(),a=this.actor.getAttackRange(),n=this.actor.getItemInSlot(ne),r=[Object(c.a)({},t)];n&&(r=n.getPositionsInShape(t));var i=[],s=function(){return i.forEach((function(t){e.game.display.removeAnimation(t.id)}))};this.actor.activateCursor(r),this.updateCursors(i,t);var o=new ja({actor:this.actor,game:this.game,onAfter:function(){e.actor.deactivateCursor(),s()}}),u={Escape:function(){return o},w:function(){return new Ea({actor:e.actor,game:e.game,label:"move N",direction:$.N,range:a,onSuccess:function(){e.updateCursors(i,t)}})},a:function(){return new Ea({actor:e.actor,game:e.game,label:"move W",direction:$.W,range:a,onSuccess:function(){e.updateCursors(i,t)}})},s:function(){return new Ea({actor:e.actor,game:e.game,label:"move S",direction:$.S,range:a,onSuccess:function(){e.updateCursors(i,t)}})},d:function(){return new Ea({actor:e.actor,game:e.game,label:"move E",direction:$.E,range:a,onSuccess:function(){e.updateCursors(i,t)}})},t:function(){return new xa({targetPositions:Object(z.a)(e.actor.getCursorPositions()),game:e.game,actor:e.actor,energyCost:e.passThroughEnergyCost,requiredResources:e.passThroughRequiredResources,onSuccess:function(){e.actor.deactivateCursor(),s(),e.actor.setNextAction(o)}})}};return this.actor.setKeymap(u),{success:!0,alternative:null}}}]),t}(ge),Ca=function(e){function t(e){var a,n=Object.assign({},e);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},n)))).processDelay=0,a.energyCost=0,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"perform",value:function(){var e=this;this.game.visibleInventory=this.actor.container;var t=new ja({actor:this.actor,game:this.game}),a={Escape:function(){return t}};return this.actor.container.forEach((function(n,r){var i=n.items[0];a[r]=function(){return new oa({item:i,game:e.game,actor:e.actor,label:"Equip ".concat(i.name),onSuccess:function(){e.game.visibleInventory=null,e.actor.setNextAction(t)}})}})),this.actor.setKeymap(a),{success:!0,alternative:null}}}]),t}(ge),wa=function(e){function t(e){var a,n=e.item,r=Object(F.a)(e,["item"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},r)))).item=n,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"perform",value:function(){return this.game.addMessage("".concat(this.actor.name," drops ").concat(this.item.name,"."),Te.ACTION),this.actor.unequip(this.item),this.game.map[T(this.actor.pos)].entities.splice(0,0,this.item),{success:!0,alternative:null}}}]),t}(ge),Ta=function(e){function t(e){var a,n=Object.assign({},e);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},n)))).processDelay=0,a.energyCost=0,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"perform",value:function(){var e=this;this.game.visibleEquipment=this.actor.equipment;var t=new ja({actor:this.actor,game:this.game}),a={Escape:function(){return t}};return this.actor.equipment.filter((function(e){return e.item})).forEach((function(n,r){a[r]=function(){return new wa({item:n.item,game:e.game,actor:e.actor,label:"Unequip ".concat(n.item.name),onSuccess:function(){e.game.visibleEquipment=null,e.actor.setNextAction(t)}})}})),this.actor.setKeymap(a),{success:!0,alternative:null}}}]),t}(ge),Pa=function(e){function t(e){var a,n=e.upgrade,r=Object(F.a)(e,["upgrade"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},r)))).upgrade=n,a.particleTemplate={renderer:{sprite:"\ue8b5",character:"^",color:"white",background:"#3e7dc9"}},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"perform",value:function(){var e=this,t=!1;this.actor.upgrade(this.upgrade)&&(t=!0,G(this.actor.pos.x,this.actor.pos.y,5).forEach((function(t){e.addParticle(4,Object(c.a)({},t),{x:-1*Math.sign(t.x-e.actor.pos.x),y:-1*Math.sign(t.y-e.actor.pos.y)})})));return{success:t,alternative:null}}}]),t}(ge),Ra=function(e){function t(e){var a,n=Object.assign({},e);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},n)))).name="Upgrade Points",a.actorResourcePath="upgrade_points",a.renderer={color:"white",background:"#3e7dc9",character:"^",sprite:"\ue8b5"},a}return Object(d.a)(t,e),t}(de),Sa=function(e){function t(e){var a,n=Object.assign({},e);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},n)))).processDelay=0,a.energyCost=0,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"perform",value:function(){var e=this,t=new ja({actor:this.actor,game:this.game}),a={Escape:function(){return t}};return this.actor.upgrade_tree.forEach((function(n,r){a[r]=function(){return new Pa({upgrade:n,game:e.game,actor:e.actor,label:"".concat(n.name),energyCost:0,requiredResources:[new Ra({getResourceCost:function(){return n.cost}})],onSuccess:function(){e.actor.setNextAction(t)}})}})),this.actor.setKeymap(a),{success:!0,alternative:null}}}]),t}(ge),_a=function(e){function t(e){var a=Object.assign({},e);return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},a)))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"perform",value:function(){var e=this,t=!1,a=this.game.map[T(this.actor.pos)].entities.filter((function(t){return t.id!==e.actor.id}));if(a.length){var n=C(a);this.game.addMessage("".concat(this.actor.name," picks up ").concat(n.name,"."),Te.ACTION),this.actor.addToContainer(n);var r=this.game.map[T(this.actor.pos)].entities;this.game.map[T(this.actor.pos)].entities=r.filter((function(e){return e.id!==n.id})),t=!0}return{success:t,alternative:null}}}]),t}(ge),Na=function(e){function t(e){e.message,e.messageType;var a,n=Object(F.a)(e,["message","messageType"]);return Object(o.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,Object(c.a)({},n)))).processDelay=0,a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"perform",value:function(){var e=this.actor.reload();return this.game.addMessage("".concat(this.actor.name,' says "RELOADING"'),Te.INFORMATION),{success:e,alternative:null}}}]),t}(ge),Da=function(e){var t=new ut({pos:{x:23,y:7},renderer:{sprite:"\ue819",character:"G",color:St,background:Dt},name:"Gear",actions:[],speed:400,durability:20,baseRangedAccuracy:0,baseRangedDamage:1,charge:10,upgrade_points:3,upgrade_tree:[it({cost:1,name:"+5% Accuracy",activate:function(e){return e.baseRangedAccuracy+=.05}}),it({cost:2,name:"+1 Actions",activate:function(e){e.speed+=100,e.energy+=100},removeOnActivate:!0})],equipment:se(),game:e.game,presentingUI:!0,initializeKeymap:function(e,t){return{Escape:function(){return new Be({label:"Pass",message:"pass turn...",game:e.game,actor:t,interrupt:!0,energyCost:0})},w:function(){var a=$.N,n=t.pos.x+a[0],r=t.pos.y+a[1];return new He({hidden:!0,targetPos:{x:n,y:r},game:e.game,actor:t,energyCost:100})},s:function(){var a=$.S,n=t.pos.x+a[0],r=t.pos.y+a[1];return new He({hidden:!0,targetPos:{x:n,y:r},game:e.game,actor:t,energyCost:100})},a:function(){var a=$.W,n=t.pos.x+a[0],r=t.pos.y+a[1];return new He({hidden:!0,targetPos:{x:n,y:r},game:e.game,actor:t,energyCost:100})},d:function(){var a=$.E,n=t.pos.x+a[0],r=t.pos.y+a[1];return new He({hidden:!0,targetPos:{x:n,y:r},game:e.game,actor:t,energyCost:100})},p:function(){return new Be({label:"Stay",message:"standing still...",game:e.game,actor:t,energyCost:100})},t:function(){return new Aa({label:"Shoot",game:e.game,actor:t,passThroughEnergyCost:100,passThroughRequiredResources:[new ka({getResourceCost:function(){return 1}})]})},r:function(){return new Na({label:"Reloading",game:e.game,actor:t,energyCost:100})},i:function(){return new Ca({label:"Inventory",game:e.game,actor:t})},o:function(){return new Ta({label:"Equipment",game:e.game,actor:t})},u:function(){return new Sa({label:"Upgrade",game:e.game,actor:t})},g:function(){return new _a({label:"Pickup",game:e.game,actor:t})}}}}),a=Array(100).fill("").map((function(){return function(e){return new ht({game:e.game,name:"Ammo",passable:!0,renderer:{character:"||",sprite:"\ue891",background:Bt,color:St}})}(e)}));t.container=[new Ie({itemType:a[0].name,items:a})];var n=function(e,t){return new lt({game:e.game,name:"Lancer",passable:!0,attackRange:6,magazineSize:4,baseRangedAccuracy:1,baseRangedDamage:1,pos:t,equipmentType:ne,renderer:{character:"L",color:St,background:Bt}})}(e);return t.equip(n.equipmentType,n),t},Ia=function(){return{Basic_Gear:Da}},Ma=function(e){function t(){var e;Object(o.a)(this,t),e=Object(l.a)(this,Object(h.a)(t).call(this));var a=Ia(),n=Object.keys(a).map((function(e,t){return{initialize:a[e],selected:!1,name:e.split("_").join(" ")}})),r=Object.keys(Ft).map((function(e,t){return{class:Ft[e],selected:!1,name:e.split("_").join(" ")}}));return e.state={activeScreen:f,characters:n,modes:r,selectedCharacter:null,selectedMode:r[0]},e}return Object(d.a)(t,e),Object(u.a)(t,[{key:"setActiveScreen",value:function(e){e===f&&Object.keys(Ge).forEach((function(e){Ge[e].stop()})),this.setState({activeScreen:e})}},{key:"setSelectedCharacter",value:function(e){this.setState({selectedCharacter:Object(c.a)({},e)})}},{key:"setSelectedMode",value:function(e){this.setState({selectedMode:e})}},{key:"getActiveScreen",value:function(){var e=r.a.createElement(Oa.CharacterSelect,{key:v,setActiveScreen:this.setActiveScreen.bind(this),setSelectedCharacter:this.setSelectedCharacter.bind(this),selectedCharacter:this.state.selectedCharacter,characters:this.state.characters}),t=r.a.createElement(Oa.Title,{key:f,setActiveScreen:this.setActiveScreen.bind(this),setSelectedCharacter:this.setSelectedCharacter.bind(this),selectedCharacter:this.state.selectedCharacter,characters:this.state.characters}),a=r.a.createElement(Oa.Lose,{key:y,setActiveScreen:this.setActiveScreen.bind(this),setSelectedCharacter:this.setSelectedCharacter.bind(this),selectedCharacter:this.state.selectedCharacter,characters:this.state.characters}),n=r.a.createElement(Oa.Win,{key:b,setActiveScreen:this.setActiveScreen.bind(this),setSelectedCharacter:this.setSelectedCharacter.bind(this),selectedCharacter:this.state.selectedCharacter,characters:this.state.characters}),i=r.a.createElement(Oa.Level,{key:m,setActiveScreen:this.setActiveScreen.bind(this),selectedCharacter:this.state.selectedCharacter,selectedMode:this.state.selectedMode});switch(this.state.activeScreen){case v:return e;case f:return t;case y:return a;case b:return n;case m:return i;default:return t}}},{key:"render",value:function(){var e=this.getActiveScreen();return r.a.createElement("div",{className:"Nystrum"},r.a.createElement(g.a,{transitionName:"fade",transitionAppear:!0,transitionEnter:!0,transitionLeave:!0,transitionAppearTimeout:500,transitionEnterTimeout:500,transitionLeaveTimeout:300},e))}}]),t}(r.a.Component);var La=function(){return r.a.createElement("div",{className:"App container-fluid"},r.a.createElement(Ma,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(La,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[143,1,2]]]);
//# sourceMappingURL=main.707cb693.chunk.js.map